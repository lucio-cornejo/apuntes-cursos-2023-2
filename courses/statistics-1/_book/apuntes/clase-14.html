<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Statistical Learning 1 - Apuntes de clase</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../apuntes/clase-13.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script type="module">
  document.addEventListener(
    "DOMContentLoaded",
    function () {
      const sidebarSections = Array.from(
        document.querySelectorAll(".sidebar-section")
      );

      // Hide each section's content menu, 
      // if there more than 4 sections
      if (sidebarSections.length > 4) {
        sidebarSections.forEach(function(section) {
          section.classList.remove("show");
        });
      }
    }
  )
</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../style.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../apuntes/clase-14.html">Semana 14</a></li><li class="breadcrumb-item"><a href="../apuntes/clase-14.html">Apuntes de clase</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Statistical Learning 1</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Sílabo</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Semana 1</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../apuntes/clase-01.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Apuntes de clase</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Semana 2</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../apuntes/clase-02.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Apuntes de clase</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Semana 3</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../apuntes/clase-03.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Apuntes de clase</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">Semana 4</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../apuntes/clase-04.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Apuntes de clase</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text">Semana 5</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../apuntes/clase-05.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Apuntes de clase</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">
 <span class="menu-text">Semana 6</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../apuntes/clase-06.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Apuntes de clase</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true">
 <span class="menu-text">Semana 7</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../apuntes/clase-07.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Apuntes de clase</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="true">
 <span class="menu-text">Semana 8</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../apuntes/clase-08.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Apuntes de clase</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="true">
 <span class="menu-text">Semana 9</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../apuntes/clase-09.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Apuntes de clase</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" aria-expanded="true">
 <span class="menu-text">Semana 11</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../apuntes/clase-11.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Apuntes de clase</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" aria-expanded="true">
 <span class="menu-text">Semana 12</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-11" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../apuntes/clase-12.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Apuntes de clase</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" aria-expanded="true">
 <span class="menu-text">Semana 13</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-12" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../apuntes/clase-13.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Apuntes de clase</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-13" aria-expanded="true">
 <span class="menu-text">Semana 14</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-13" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-13" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../apuntes/clase-14.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Apuntes de clase</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Tabla de Contenidos</h2>
   
  <ul>
  <li><a href="#conglomerados" id="toc-conglomerados" class="nav-link active" data-scroll-target="#conglomerados">Conglomerados</a>
  <ul>
  <li><a href="#intro" id="toc-intro" class="nav-link" data-scroll-target="#intro">Intro</a></li>
  <li><a href="#tipos-de-análisis-cluster" id="toc-tipos-de-análisis-cluster" class="nav-link" data-scroll-target="#tipos-de-análisis-cluster">Tipos de Análisis Cluster</a></li>
  <li><a href="#problemas-comunes" id="toc-problemas-comunes" class="nav-link" data-scroll-target="#problemas-comunes">Problemas comunes</a></li>
  <li><a href="#similaridad-distancia-y-proximidad" id="toc-similaridad-distancia-y-proximidad" class="nav-link" data-scroll-target="#similaridad-distancia-y-proximidad">Similaridad, distancia y proximidad</a></li>
  <li><a href="#matriz-de-distancias-disimilaridad" id="toc-matriz-de-distancias-disimilaridad" class="nav-link" data-scroll-target="#matriz-de-distancias-disimilaridad">Matriz de distancias (disimilaridad)</a></li>
  <li><a href="#distancias-con-datos-numéricos" id="toc-distancias-con-datos-numéricos" class="nav-link" data-scroll-target="#distancias-con-datos-numéricos">Distancias con datos numéricos:</a></li>
  <li><a href="#distancias-con-datos-mixtos" id="toc-distancias-con-datos-mixtos" class="nav-link" data-scroll-target="#distancias-con-datos-mixtos">Distancias con datos mixtos</a></li>
  </ul></li>
  <li><a href="#ejemplo-práctico" id="toc-ejemplo-práctico" class="nav-link" data-scroll-target="#ejemplo-práctico">Ejemplo práctico</a>
  <ul>
  <li><a href="#distancias" id="toc-distancias" class="nav-link" data-scroll-target="#distancias">Distancias</a>
  <ul class="collapse">
  <li><a href="#datos-numéricos" id="toc-datos-numéricos" class="nav-link" data-scroll-target="#datos-numéricos">Datos numéricos</a></li>
  <li><a href="#datos-numéricos-y-categóricos" id="toc-datos-numéricos-y-categóricos" class="nav-link" data-scroll-target="#datos-numéricos-y-categóricos">Datos numéricos y categóricos</a></li>
  </ul></li>
  <li><a href="#métodos-de-particionamiento" id="toc-métodos-de-particionamiento" class="nav-link" data-scroll-target="#métodos-de-particionamiento">Métodos de Particionamiento</a>
  <ul class="collapse">
  <li><a href="#método-k-means" id="toc-método-k-means" class="nav-link" data-scroll-target="#método-k-means">Método K-means</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#ejemplo-práctico-k-means" id="toc-ejemplo-práctico-k-means" class="nav-link" data-scroll-target="#ejemplo-práctico-k-means">Ejemplo práctico: K-means</a>
  <ul>
  <li><a href="#datos-no-normalizados" id="toc-datos-no-normalizados" class="nav-link" data-scroll-target="#datos-no-normalizados">Datos no normalizados</a></li>
  <li><a href="#datos-normalizados" id="toc-datos-normalizados" class="nav-link" data-scroll-target="#datos-normalizados">Datos normalizados</a></li>
  </ul></li>
  <li><a href="#ejemplo-práctico-k-means-1" id="toc-ejemplo-práctico-k-means-1" class="nav-link" data-scroll-target="#ejemplo-práctico-k-means-1">Ejemplo práctico: K-means</a>
  <ul>
  <li><a href="#determinar-número-de-conglomerados" id="toc-determinar-número-de-conglomerados" class="nav-link" data-scroll-target="#determinar-número-de-conglomerados">Determinar número de conglomerados</a></li>
  <li><a href="#perfilado-y-caracterización-de-clusters" id="toc-perfilado-y-caracterización-de-clusters" class="nav-link" data-scroll-target="#perfilado-y-caracterización-de-clusters">Perfilado y caracterización de clusters</a></li>
  <li><a href="#silueta" id="toc-silueta" class="nav-link" data-scroll-target="#silueta">Silueta</a></li>
  <li><a href="#criterio-de-calinski-harabasz" id="toc-criterio-de-calinski-harabasz" class="nav-link" data-scroll-target="#criterio-de-calinski-harabasz">Criterio de Calinski-Harabasz</a></li>
  </ul></li>
  <li><a href="#notas-finales" id="toc-notas-finales" class="nav-link" data-scroll-target="#notas-finales">Notas finales</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Apuntes de clase</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="conglomerados" class="level2">
<h2 class="anchored" data-anchor-id="conglomerados">Conglomerados</h2>
<ul>
<li><strong>Goal:</strong> Agrupar observaciones, de modo que cierta <strong>distancia</strong> entre observaciones, por grupo, sea minimizada.</li>
</ul>
<section id="intro" class="level3">
<h3 class="anchored" data-anchor-id="intro">Intro</h3>
<ul>
<li><p><strong>Clustering</strong> es una herramienta para <strong>anáisis descriptivo</strong>.</p></li>
<li><p>El objetivo principal es <strong>encontrar subgrupos homogéneos</strong>.</p></li>
<li><p>Se busca que observaciones del mismo grupo sean similares; mientras que, de grupos distintos, sean diferentes.</p></li>
<li><p>Clustering no es clasificar, pues no hay variables dependiente.</p></li>
<li><p>Por lo general, no es adecuado comparar cluster algorithms diferentes.</p></li>
<li><p>Clustering también puede servir para <strong>reducir el tamaño de un conjunto de datos</strong>.</p></li>
</ul>
</section>
<section id="tipos-de-análisis-cluster" class="level3">
<h3 class="anchored" data-anchor-id="tipos-de-análisis-cluster">Tipos de Análisis Cluster</h3>
<ul>
<li>Cluster jerárquico</li>
<li>Cluster Bayesiano</li>
<li>Cluster particional</li>
</ul>
</section>
<section id="problemas-comunes" class="level3">
<h3 class="anchored" data-anchor-id="problemas-comunes">Problemas comunes</h3>
<ul>
<li><p>Problemas principales:</p>
<ul>
<li><strong>Aglutinación</strong>: Ocurre cuando un <strong>objeto puede pertenecer a más de un cluster</strong>.<br>
Para mitigar esta situación, se usan <strong>algoritmos difusos</strong>.</li>
<li><strong>Disección</strong>: Ocurre cuando la población asociada a los datos <strong>no contiene clusters significativos</strong>.</li>
</ul></li>
<li><p>Presencia de outliers.</p></li>
<li><p>Datos no normalizados (no tener misma escala).</p></li>
</ul>
</section>
<section id="similaridad-distancia-y-proximidad" class="level3">
<h3 class="anchored" data-anchor-id="similaridad-distancia-y-proximidad">Similaridad, distancia y proximidad</h3>
<ul>
<li><strong>Medida o función de similaridad</strong>:
<ul>
<li>Cuantifica similaridad entre objetos.</li>
<li>A mayor valor, objetos más similares.</li>
<li>Usualmente es un valor entre 0 (no similaridad) y 1 (objetos completamente similares.)</li>
</ul></li>
<li><strong>Distancia</strong> (medida de disimilaridad):
<ul>
<li>Indica qué tan diferentes son los datos.</li>
<li>Menor valor, objeto smás parecidos.</li>
<li>Mínimo valor de disimilaridad suele ser 0.</li>
<li>Rango suele ser <span class="math inline">\(\left[0; 1\right]\)</span> o <span class="math inline">\(\left[0; \infty \right(\)</span></li>
</ul></li>
<li><strong>Proximidad</strong>: Se refiere usualmente tanto a la similaridad como a la disimilaridad.</li>
</ul>
</section>
<section id="matriz-de-distancias-disimilaridad" class="level3">
<h3 class="anchored" data-anchor-id="matriz-de-distancias-disimilaridad">Matriz de distancias (disimilaridad)</h3>
<ul>
<li>Matriz <span class="math inline">\(n\times n\)</span> donde se registran las distancias <span class="math inline">\(d \left( i, j \right)\)</span> .</li>
<li><strong>Usualmente simétrica</strong> (no siempre).</li>
</ul>
<div id="prp">
<p>Las funciones de distancias son usualmente distintas para variables de tipo cuantitativa o categórica.</p>
</div>
</section>
<section id="distancias-con-datos-numéricos" class="level3">
<h3 class="anchored" data-anchor-id="distancias-con-datos-numéricos">Distancias con datos numéricos:</h3>
<ul>
<li><strong>Distancias de Minkowski</strong>: Sí es una métrica matemática. <span class="math display">\[
d \left( i, j \right) = \left( \sum_{k=1}^{M} | x_{ik} - x_{jk} |^p \right)^{\dfrac{1}{p}},
\]</span></li>
</ul>
<p>donde los datos pertenecen a <span class="math inline">\(\mathbb{R}^M\)</span>, y <span class="math inline">\(p\)</span> es el orden de la distancia (<span class="math inline">\(L_p norm\)</span> ).</p>
<ul>
<li><strong>Distancia de Canberra</strong></li>
</ul>
</section>
<section id="distancias-con-datos-mixtos" class="level3">
<h3 class="anchored" data-anchor-id="distancias-con-datos-mixtos">Distancias con datos mixtos</h3>
<ul>
<li><p><strong>Distancia de Gower</strong> (el profesor no recomienda usar esta distancia, dice que no tiene un sustento robusto, a menos que no tengamos una mejor opción)</p></li>
<li><p>Como alternativa, el profesor recomienda usar un <strong>MD Cluster</strong>.</p></li>
</ul>
</section>
</section>
<section id="ejemplo-práctico" class="level2">
<h2 class="anchored" data-anchor-id="ejemplo-práctico">Ejemplo práctico</h2>
<section id="distancias" class="level3">
<h3 class="anchored" data-anchor-id="distancias">Distancias</h3>
<section id="datos-numéricos" class="level4">
<h4 class="anchored" data-anchor-id="datos-numéricos">Datos numéricos</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Base R</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">666</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">rnorm</span>(<span class="dv">20</span>), <span class="at">nrow =</span> <span class="dv">5</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">dist</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         1        2        3        4
2 4.700411                           
3 2.344002 3.615848                  
4 4.833851 1.521420 3.768408         
5 3.777519 4.809694 2.184675 5.137616</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dist</span>(x, <span class="at">method =</span> <span class="st">"manhattan"</span>, <span class="at">diag =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         1        2        3        4        5
1 0.000000                                    
2 8.180026 0.000000                           
3 4.375477 6.021439 0.000000                  
4 8.202318 1.990697 6.885186 0.000000         
5 6.648528 7.471869 3.794025 9.218155 0.000000</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dist</span>(x, <span class="at">method =</span> <span class="st">"maximum"</span>, <span class="at">upper =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         1        2        3        4        5
1          3.920273 1.560916 3.870199 2.970185
2 3.920273          2.634884 1.440753 4.231229
3 1.560916 2.634884          2.584809 1.861740
4 3.870199 1.440753 2.584809          4.245042
5 2.970185 4.231229 1.861740 4.245042         </code></pre>
</div>
</div>
<p><strong>La función <code>dist</code> solo funciona con datos numéricos.</strong></p>
</section>
<section id="datos-numéricos-y-categóricos" class="level4">
<h4 class="anchored" data-anchor-id="datos-numéricos-y-categóricos">Datos numéricos y categóricos</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cluster)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'cluster' was built under R version 4.1.3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">daisy</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Dissimilarities :
         1        2        3        4
2 4.700411                           
3 2.344002 3.615848                  
4 4.833851 1.521420 3.768408         
5 3.777519 4.809694 2.184675 5.137616

Metric :  euclidean 
Number of objects : 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">cbind</span>(<span class="fu">rnorm</span>(<span class="dv">10</span>), <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,<span class="dv">10</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>))</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(x)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>x[,<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(x[,<span class="dv">2</span>])</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="fu">daisy</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Dissimilarities :
             1           2           3           4           5           6
2  0.080941937                                                            
3  0.323301658 0.404243594                                                
4  0.062576004 0.143517940 0.260725654                                    
5  0.619146631 0.700088568 0.704155027 0.556570628                        
6  0.630276188 0.549334251 0.953577846 0.692852192 0.249422819            
7  0.071644082 0.009297854 0.394945740 0.134220086 0.690790714 0.558632106
8  0.676698342 0.595756406 1.000000000 0.739274346 0.295844973 0.046422154
9  0.061087567 0.019854370 0.384389225 0.123663570 0.680234198 0.569188621
10 0.107313820 0.026371883 0.430615478 0.169889823 0.726460451 0.522962368
             7           8           9
2                                     
3                                     
4                                     
5                                     
6                                     
7                                     
8  0.605054260                        
9  0.010556516 0.615610775            
10 0.035669737 0.569384522 0.046226253

Metric :  mixed ;  Types = I, N 
Number of objects : 10</code></pre>
</div>
</div>
</section>
</section>
<section id="métodos-de-particionamiento" class="level3">
<h3 class="anchored" data-anchor-id="métodos-de-particionamiento">Métodos de Particionamiento</h3>
<ul>
<li>Los datos son particionados en un número <span class="math inline">\(K\)</span> fijado de conglomerados.</li>
<li>Luego, iterativamente se va reasignando las observaciones a los conglomerados hasta que algún <strong>criterio de parada</strong> (función a optimizar) se satisface, o, se cumplió el número <strong>máximo fijado de iteraciones</strong>.</li>
</ul>
<section id="método-k-means" class="level4">
<h4 class="anchored" data-anchor-id="método-k-means">Método K-means</h4>
<div id="prp">
<p>Se recomienda <strong>normalizar</strong> las variables antes de implementar este algoritmo.</p>
</div>
<ul>
<li><p>Centroide es un representate del cluster al que pertenece.</p></li>
<li><p><strong>Metodología</strong>:</p>
<ol type="1">
<li>Asigna aleatoriamente un número, de 1 a <span class="math inline">\(K\)</span> , a cada una de las observaciones.</li>
<li>Iterar hasta que la asignación de los cluster deje de cambiar
<ol type="1">
<li>Para cada uno de los <span class="math inline">\(K\)</span> cluster, calcular el centroide. El k-ésimo centroide es el vector con las <span class="math inline">\(p\)</span> medias de las variables para las observaciones en el k-ésimo cluster.</li>
<li>Asignar cada observación al cluster donde el entroide esté más cerca (donde cercanía se encuentra definida por la distancia Euclidiana).</li>
</ol></li>
</ol></li>
<li><p>Al inicio, el centroide es una observación; para las siguientes iteraciones, most likely ya no.</p></li>
<li><p>El algoritmo anterior garantiza que el valor del objetivo asociado a este modelo <strong>decrezca en cada etapa</strong>.</p></li>
<li><p>Este algoritmo es <strong>computacionalmente rápido</strong>; usualmente se fija 20 o 25 como el <strong>máximo de iteraciones</strong>.</p></li>
<li><p>Cambiando la métrica usada para la función objetivo, se pueden obtener diferentes clusters.</p></li>
<li><p><strong>Desventajas</strong>:</p>
<ul>
<li>Usualmente <strong>no</strong> se encuentra un <strong>óptimo global</strong>, solo <strong>óptimo local</strong>; pero esto puede mitigarse permitiendo un mayor número de iteraciones del loop del algoritmo.</li>
<li>Es <strong>sensible a outliers</strong>, debido al uso de medias; pero se puede mitigar vía el uso de <strong>mediodes</strong> (usar mediana en vez de media), empleando la métrica <span class="math inline">\(L_1\)</span> en vez de <span class="math inline">\(L_2\)</span> también.</li>
</ul></li>
</ul>
</section>
</section>
</section>
<section id="ejemplo-práctico-k-means" class="level2">
<h2 class="anchored" data-anchor-id="ejemplo-práctico-k-means">Ejemplo práctico: K-means</h2>
<section id="datos-no-normalizados" class="level3">
<h3 class="anchored" data-anchor-id="datos-no-normalizados">Datos no normalizados</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">007</span>)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">cbind</span>(</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rnorm</span>(<span class="dv">100</span>,<span class="dv">1000</span>,<span class="dv">100</span>), <span class="fu">c</span>(<span class="fu">rnorm</span>(<span class="dv">50</span>), <span class="fu">rnorm</span>(<span class="dv">50</span>,<span class="dv">10</span>,<span class="dv">1</span>))</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(x, <span class="at">pch =</span> <span class="dv">16</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="clase-14_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">#k-means datos originales</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">kmeans</span>(x, <span class="dv">2</span>)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(x, <span class="at">col =</span> <span class="fu">c</span>(<span class="st">"green"</span>,<span class="st">"red"</span>)[res<span class="sc">$</span>cluster], <span class="at">pch =</span> <span class="dv">16</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="clase-14_files/figure-html/unnamed-chunk-3-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="datos-normalizados" class="level3">
<h3 class="anchored" data-anchor-id="datos-normalizados">Datos normalizados</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Estandarización</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>xs <span class="ot">&lt;-</span> <span class="fu">scale</span>(x)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(xs, <span class="at">pch =</span> <span class="dv">16</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="clase-14_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co">#k-means datos estandarizados</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">kmeans</span>(xs, <span class="dv">2</span>)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(x, <span class="at">col =</span> <span class="fu">c</span>(<span class="st">"green"</span>,<span class="st">"red"</span>)[res<span class="sc">$</span>cluster], <span class="at">pch =</span> <span class="dv">16</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="clase-14_files/figure-html/unnamed-chunk-4-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="ejemplo-práctico-k-means-1" class="level2">
<h2 class="anchored" data-anchor-id="ejemplo-práctico-k-means-1">Ejemplo práctico: K-means</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(foreign)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>distritos<span class="ot">=</span><span class="fu">read.spss</span>(</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"../datos/distritos.sav"</span>,</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">use.value.labels =</span> <span class="cn">TRUE</span>, <span class="at">max.value.labels =</span> <span class="cn">Inf</span>, </span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">to.data.frame =</span> <span class="cn">TRUE</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>re-encoding from CP1252</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(distritos) <span class="ot">&lt;-</span> <span class="fu">tolower</span>(<span class="fu">colnames</span>(distritos))</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>nombres  <span class="ot">=</span> distritos[,<span class="dv">1</span>]</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>distritos <span class="ot">=</span> distritos[,<span class="sc">-</span><span class="dv">1</span>]</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(distritos) <span class="ot">=</span> nombres</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(distritos)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                               ocu_vivi pobpjov sinelect sinagua pea1619
Ate                                1.15     5.3    27.60   51.10     3.9
Barranco                           1.09     4.5     1.59    8.32     0.8
Breña                              1.08     4.4     2.20   23.15     0.9
Carabayllo                         1.10     5.1    30.13   38.09     4.5
Comas                              1.20     5.9    10.92   24.27     3.8
Chorrillos                         1.15     5.5    16.77   37.11     3.2
                               pocprin peam15
Ate                                1.1  63.48
Barranco                           3.9  33.48
Breña                              4.0  37.89
Carabayllo                        12.6  63.65
Comas                              9.4  60.37
Chorrillos                        10.6  18.78</code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">kmeans</span>(<span class="fu">scale</span>(distritos), <span class="dv">2</span>)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>res</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>K-means clustering with 2 clusters of sizes 15, 19

Cluster means:
    ocu_vivi    pobpjov   sinelect    sinagua    pea1619    pocprin     peam15
1  0.6635316  0.7536352  0.8957621  0.7981240  0.9978041  0.7677947  0.8420238
2 -0.5238407 -0.5949751 -0.7071806 -0.6300979 -0.7877401 -0.6061537 -0.6647556

Clustering vector:
Ate                            Barranco                       
                             1                              2 
Breña                          Carabayllo                     
                             2                              1 
Comas                          Chorrillos                     
                             1                              1 
Agustino                       Independencia                  
                             1                              1 
Jesús María                    La Victoria                    
                             2                              2 
Lima                           Lince                          
                             2                              2 
Los Olivos                     Lurigancho-Chosica             
                             1                              1 
Magdalena del Mar              Pueblo Libre                   
                             2                              2 
Miraflores                     Rímac                          
                             2                              2 
San Borja                      San Isidro                     
                             2                              2 
San Juan de Lurigancho         San Juan de Miraflores         
                             1                              1 
San Luis                       San Martin de Porres           
                             2                              1 
San Miguel                     Santa Anita                    
                             2                              1 
Surco                          Surquillo                      
                             2                              2 
Villa el Salvador              Villa María del Triunfo        
                             1                              2 
Callao                         Carmen de la Legua             
                             1                              1 
La Perla                       La Punta                       
                             2                              2 

Within cluster sum of squares by cluster:
[1] 67.25282 36.46842
 (between_SS / total_SS =  55.1 %)

Available components:

[1] "cluster"      "centers"      "totss"        "withinss"     "tot.withinss"
[6] "betweenss"    "size"         "iter"         "ifault"      </code></pre>
</div>
</div>
<section id="determinar-número-de-conglomerados" class="level3">
<h3 class="anchored" data-anchor-id="determinar-número-de-conglomerados">Determinar número de conglomerados</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Suma de cuadrados dentro de clusters</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>wss <span class="ot">&lt;-</span> <span class="fu">numeric</span>()</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (h <span class="cf">in</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Importante el argumento nstart ene este caso,</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># para que los elementos de wss decrezcan</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  b <span class="ot">&lt;-</span> <span class="fu">kmeans</span>(<span class="fu">scale</span>(distritos),h, <span class="at">nstart =</span> <span class="dv">50</span>)</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>  wss[h<span class="dv">-1</span>] <span class="ot">&lt;-</span> b<span class="sc">$</span>tot.withinss</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">10</span>, wss, <span class="at">type =</span> <span class="st">"b"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="clase-14_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Silueta</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>diss.distritos <span class="ot">=</span> <span class="fu">daisy</span>(<span class="fu">scale</span>(distritos))</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>))</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(h <span class="cf">in</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>) {</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="fu">kmeans</span>(<span class="fu">scale</span>(distritos), h)</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>(<span class="fu">silhouette</span>(</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Vector que indica a qué conglomerado pertenece cada observación</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>    res<span class="sc">$</span>cluster,</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Matriz de disimilaridad (que usaste en K-means)</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>    diss.distritos</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># En caso se tengan demasiadas observaciones</span></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">summary</span>(<span class="fu">silhouette</span>(res<span class="sc">$</span>cluster, diss.distritos)))</span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Silhouette of 34 units in 2 clusters from silhouette.default(x = res$cluster, dist = diss.distritos) :
 Cluster sizes and average silhouette widths:
       19        15 
0.5706235 0.3463122 
Individual silhouette widths:
    Min.  1st Qu.   Median     Mean  3rd Qu.     Max. 
-0.00153  0.39015  0.46612  0.47166  0.63262  0.70602 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Silhouette of 34 units in 3 clusters from silhouette.default(x = res$cluster, dist = diss.distritos) :
 Cluster sizes and average silhouette widths:
        12          9         13 
0.51025714 0.09804962 0.28793020 
Individual silhouette widths:
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
-0.1829  0.1781  0.3525  0.3161  0.4641  0.6413 </code></pre>
</div>
<div class="cell-output-display">
<p><img src="clase-14_files/figure-html/unnamed-chunk-6-2.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Silhouette of 34 units in 4 clusters from silhouette.default(x = res$cluster, dist = diss.distritos) :
 Cluster sizes and average silhouette widths:
        9         9         5        11 
0.2352400 0.2527997 0.4144512 0.4409134 
Individual silhouette widths:
    Min.  1st Qu.   Median     Mean  3rd Qu.     Max. 
-0.02978  0.22634  0.35484  0.33278  0.44000  0.59277 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="prp">
<p>El valor <strong>Mean</strong> de la sección <strong>Individual silhouette widths</strong> del resultado de <code>summary</code>, es el indicador que usaríamos para saber qué tan bien se realizó el clustering.</p>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Criterio de Calinski-Harabasz</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(fpc)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'fpc' was built under R version 4.1.3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>ch <span class="ot">&lt;-</span> <span class="fu">numeric</span>()</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (h <span class="cf">in</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="fu">kmeans</span>(<span class="fu">scale</span>(distritos),h,<span class="at">nstart =</span> <span class="dv">100</span>)</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>  ch[h<span class="dv">-1</span>] <span class="ot">&lt;-</span> <span class="fu">calinhara</span>(<span class="fu">scale</span>(distritos),res<span class="sc">$</span>cluster)</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2</span><span class="sc">:</span><span class="dv">10</span>,ch,<span class="at">type=</span><span class="st">"b"</span>,<span class="at">xlab=</span><span class="st">"k"</span>,</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">ylab=</span><span class="st">"Criterio de Calinski-Harabasz"</span></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="clase-14_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Criterio de Calinski-Harabasz</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kmeansruns</span>(<span class="fu">scale</span>(distritos),<span class="at">criterion=</span><span class="st">"ch"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>K-means clustering with 2 clusters of sizes 15, 19

Cluster means:
    ocu_vivi    pobpjov   sinelect    sinagua    pea1619    pocprin     peam15
1  0.6635316  0.7536352  0.8957621  0.7981240  0.9978041  0.7677947  0.8420238
2 -0.5238407 -0.5949751 -0.7071806 -0.6300979 -0.7877401 -0.6061537 -0.6647556

Clustering vector:
Ate                            Barranco                       
                             1                              2 
Breña                          Carabayllo                     
                             2                              1 
Comas                          Chorrillos                     
                             1                              1 
Agustino                       Independencia                  
                             1                              1 
Jesús María                    La Victoria                    
                             2                              2 
Lima                           Lince                          
                             2                              2 
Los Olivos                     Lurigancho-Chosica             
                             1                              1 
Magdalena del Mar              Pueblo Libre                   
                             2                              2 
Miraflores                     Rímac                          
                             2                              2 
San Borja                      San Isidro                     
                             2                              2 
San Juan de Lurigancho         San Juan de Miraflores         
                             1                              1 
San Luis                       San Martin de Porres           
                             2                              1 
San Miguel                     Santa Anita                    
                             2                              1 
Surco                          Surquillo                      
                             2                              2 
Villa el Salvador              Villa María del Triunfo        
                             1                              2 
Callao                         Carmen de la Legua             
                             1                              1 
La Perla                       La Punta                       
                             2                              2 

Within cluster sum of squares by cluster:
[1] 67.25282 36.46842
 (between_SS / total_SS =  55.1 %)

Available components:

 [1] "cluster"      "centers"      "totss"        "withinss"     "tot.withinss"
 [6] "betweenss"    "size"         "iter"         "ifault"       "crit"        
[11] "bestk"       </code></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Criterio anchura de silueta</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kmeansruns</span>(<span class="fu">scale</span>(distritos),<span class="at">criterion=</span><span class="st">"asw"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>K-means clustering with 2 clusters of sizes 19, 15

Cluster means:
    ocu_vivi    pobpjov   sinelect    sinagua    pea1619    pocprin     peam15
1 -0.5238407 -0.5949751 -0.7071806 -0.6300979 -0.7877401 -0.6061537 -0.6647556
2  0.6635316  0.7536352  0.8957621  0.7981240  0.9978041  0.7677947  0.8420238

Clustering vector:
Ate                            Barranco                       
                             2                              1 
Breña                          Carabayllo                     
                             1                              2 
Comas                          Chorrillos                     
                             2                              2 
Agustino                       Independencia                  
                             2                              2 
Jesús María                    La Victoria                    
                             1                              1 
Lima                           Lince                          
                             1                              1 
Los Olivos                     Lurigancho-Chosica             
                             2                              2 
Magdalena del Mar              Pueblo Libre                   
                             1                              1 
Miraflores                     Rímac                          
                             1                              1 
San Borja                      San Isidro                     
                             1                              1 
San Juan de Lurigancho         San Juan de Miraflores         
                             2                              2 
San Luis                       San Martin de Porres           
                             1                              2 
San Miguel                     Santa Anita                    
                             1                              2 
Surco                          Surquillo                      
                             1                              1 
Villa el Salvador              Villa María del Triunfo        
                             2                              1 
Callao                         Carmen de la Legua             
                             2                              2 
La Perla                       La Punta                       
                             1                              1 

Within cluster sum of squares by cluster:
[1] 36.46842 67.25282
 (between_SS / total_SS =  55.1 %)

Available components:

 [1] "cluster"      "centers"      "totss"        "withinss"     "tot.withinss"
 [6] "betweenss"    "size"         "iter"         "ifault"       "crit"        
[11] "bestk"       </code></pre>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>res<span class="ot">=</span><span class="fu">kmeans</span>(<span class="fu">scale</span>(distritos),<span class="dv">2</span>, <span class="at">nstart =</span> <span class="dv">50</span>)</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plotcluster</span>(distritos,res<span class="sc">$</span>cluster)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="clase-14_files/figure-html/unnamed-chunk-7-2.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">clusplot</span>(</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  distritos,res<span class="sc">$</span>cluster, <span class="at">color =</span> <span class="cn">TRUE</span>,</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">shade =</span> <span class="cn">TRUE</span>, <span class="at">labels =</span><span class="dv">2</span>,<span class="at">lines=</span><span class="dv">0</span>,</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">main =</span><span class="st">"Gráfico de Conglomerados"</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="clase-14_files/figure-html/unnamed-chunk-7-3.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><strong>K=2 sería el valor idóneo para el número de clusters</strong>, según este criterio.</p>
</section>
<section id="perfilado-y-caracterización-de-clusters" class="level3">
<h3 class="anchored" data-anchor-id="perfilado-y-caracterización-de-clusters">Perfilado y caracterización de clusters</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Adicionar los cluster a la base de datos</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>distritos.new<span class="ot">&lt;-</span><span class="fu">cbind</span>(distritos,res<span class="sc">$</span>cluster)</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(distritos.new)<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="fu">colnames</span>(distritos.new[,<span class="sc">-</span><span class="fu">length</span>(distritos.new)]), <span class="st">"cluster.km"</span>)</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(distritos.new)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                               ocu_vivi pobpjov sinelect sinagua pea1619
Ate                                1.15     5.3    27.60   51.10     3.9
Barranco                           1.09     4.5     1.59    8.32     0.8
Breña                              1.08     4.4     2.20   23.15     0.9
Carabayllo                         1.10     5.1    30.13   38.09     4.5
Comas                              1.20     5.9    10.92   24.27     3.8
Chorrillos                         1.15     5.5    16.77   37.11     3.2
                               pocprin peam15 cluster.km
Ate                                1.1  63.48          2
Barranco                           3.9  33.48          1
Breña                              4.0  37.89          1
Carabayllo                        12.6  63.65          2
Comas                              9.4  60.37          2
Chorrillos                        10.6  18.78          2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tabla de medias</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>med<span class="ot">&lt;-</span><span class="fu">aggregate</span>(<span class="at">x =</span> distritos.new[,<span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>],<span class="at">by =</span> <span class="fu">list</span>(distritos.new<span class="sc">$</span>cluster.km),<span class="at">FUN =</span> mean)</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>med</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Group.1 ocu_vivi  pobpjov  sinelect  sinagua   pea1619  pocprin   peam15
1       1 1.080526 4.631579  2.447895 15.80895 0.8736842 5.057895 32.16526
2       2 1.160000 5.520000 18.856000 37.02400 3.7946667 9.780000 56.84000</code></pre>
</div>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Describir variables</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">4</span>))</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(distritos.new[,<span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>])) {</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(distritos.new[,i]<span class="sc">~</span>distritos.new<span class="sc">$</span>cluster.km, <span class="at">main=</span><span class="fu">names</span>(distritos.new[i]), <span class="at">type=</span><span class="st">"l"</span>)</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="clase-14_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div id="prp">
<p>Para el caso de <strong>dos conglomerados</strong>, la conglomeración es <strong>más adecuada</strong> cuando el ratio <strong>between_SS / total_SS</strong> es muy cercano a <span class="math inline">\(1\)</span> .</p>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>res<span class="sc">$</span>betweenss <span class="sc">/</span> (res<span class="sc">$</span>betweenss <span class="sc">+</span> res<span class="sc">$</span>tot.withins)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.5509903</code></pre>
</div>
</div>
</section>
<section id="silueta" class="level3">
<h3 class="anchored" data-anchor-id="silueta">Silueta</h3>
<ul>
<li><p>Representa <strong>qué tan bien está agrupada la observación, en su conglomerado respectivo</strong>.</p></li>
<li><p><strong>Mayor silueta, mayor similitud de la observación a las observaciones en su conglomerado</strong>.</p></li>
<li><p>Está entre <span class="math inline">\(-1\)</span> y <span class="math inline">\(1\)</span>, pero un <strong>valor negativo</strong> indica que la observación no pertenece a un cluster adecuado.</p></li>
<li><p>El ancho de silueta de la i-ésima observación es definida por <span class="math inline">\(\text{ sil }_i = \dfrac{b_i - a_i}{max \left( a_i, b_i \right)}\)</span> .</p></li>
<li><p>Definiciones:</p>
<ul>
<li><span class="math inline">\(a_i\)</span> : <strong>Distancia promedio</strong> entre la observación <span class="math inline">\(i\)</span> y todas las otras observaciones en el <strong>mismo conglomerado que i</strong>.</li>
<li><span class="math inline">\(b_i\)</span>: Denota la <strong>mínima distancia promedio</strong> de <span class="math inline">\(i\)</span> a las observaciones que están en otros conglomerados.</li>
</ul></li>
<li><p><strong>Silueta con valor 1</strong> indica que esa observación está perfectamente asignada en su cluster respectivo.</p></li>
<li><p>La <strong>medida de silueta</strong> se define como <span class="math inline">\(\bar{s} = \dfrac{1}{n} \displaystyle{ \sum_{1}^{n} \text{ sil}_i }\)</span></p></li>
</ul>
</section>
<section id="criterio-de-calinski-harabasz" class="level3">
<h3 class="anchored" data-anchor-id="criterio-de-calinski-harabasz">Criterio de Calinski-Harabasz</h3>
<ul>
<li>Valor por calcular:</li>
</ul>
<p><span class="math display">\[
\dfrac{(n-k) \times \text{ Suma de cuadrados entre los grupos }}{(k-1) \times \text{ Suma de cuadrados dentro de los grupos }}
\]</span></p>
<ul>
<li><strong>Mayor valor, mejor agrupación de los objetos en conglomerados</strong>.</li>
</ul>
<div id="prp">
<p>Ambos criterios, silueta y Calinski-Harabasz, sirven para cualquier tipo de conglomeración, no solo para K-means.</p>
</div>
</section>
</section>
<section id="notas-finales" class="level2">
<h2 class="anchored" data-anchor-id="notas-finales">Notas finales</h2>
<ul>
<li><p>Como falta cubrir el tema <strong>conglomerados jerárquicos</strong>, el profesor lo grabará y nos compartirá la grabación, como parte del material del curso por ser <strong>evaluado</strong>.</p></li>
<li><p>Próxima semana nos pasan la nota de la Tarea 1.</p></li>
<li><p><strong>Sábado 9, a la hora de clase, de manera sincrónica</strong>, <strong>será el examen final</strong>. La metodología es parecida al parcial.</p></li>
<li><p><strong>La tarea 2 se puede entregar hasta el domingo 10</strong>.</p></li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../apuntes/clase-13.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Apuntes de clase</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->



</body></html>