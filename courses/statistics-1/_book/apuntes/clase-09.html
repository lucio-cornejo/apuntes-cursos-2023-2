<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Statistical Learning 1 - Apuntes de clase</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../apuntes/clase-11.html" rel="next">
<link href="../apuntes/clase-08.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script type="module">
  document.addEventListener(
    "DOMContentLoaded",
    function () {
      const sidebarSections = Array.from(
        document.querySelectorAll(".sidebar-section")
      );

      // Hide each section's content menu, 
      // if there more than 4 sections
      if (sidebarSections.length > 4) {
        sidebarSections.forEach(function(section) {
          section.classList.remove("show");
        });
      }
    }
  )
</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../style.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../apuntes/clase-09.html">Semana 9</a></li><li class="breadcrumb-item"><a href="../apuntes/clase-09.html">Apuntes de clase</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Statistical Learning 1</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Sílabo</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Semana 1</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../apuntes/clase-01.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Apuntes de clase</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Semana 2</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../apuntes/clase-02.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Apuntes de clase</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Semana 3</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../apuntes/clase-03.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Apuntes de clase</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">Semana 4</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../apuntes/clase-04.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Apuntes de clase</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text">Semana 5</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../apuntes/clase-05.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Apuntes de clase</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">
 <span class="menu-text">Semana 6</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../apuntes/clase-06.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Apuntes de clase</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true">
 <span class="menu-text">Semana 7</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../apuntes/clase-07.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Apuntes de clase</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="true">
 <span class="menu-text">Semana 8</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../apuntes/clase-08.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Apuntes de clase</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="true">
 <span class="menu-text">Semana 9</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../apuntes/clase-09.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Apuntes de clase</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" aria-expanded="true">
 <span class="menu-text">Semana 11</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../apuntes/clase-11.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Apuntes de clase</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" aria-expanded="true">
 <span class="menu-text">Semana 12</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-11" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../apuntes/clase-12.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Apuntes de clase</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" aria-expanded="true">
 <span class="menu-text">Semana 13</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-12" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../apuntes/clase-13.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Apuntes de clase</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-13" aria-expanded="true">
 <span class="menu-text">Semana 14</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-13" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-13" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../apuntes/clase-14.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Apuntes de clase</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Tabla de Contenidos</h2>
   
  <ul>
  <li><a href="#decision-trees" id="toc-decision-trees" class="nav-link active" data-scroll-target="#decision-trees">Decision Trees</a>
  <ul>
  <li><a href="#partes-de-un-árbol-de-decisión" id="toc-partes-de-un-árbol-de-decisión" class="nav-link" data-scroll-target="#partes-de-un-árbol-de-decisión">Partes de un Árbol de Decisión</a></li>
  <li><a href="#construcción-de-un-árbol-de-decisión" id="toc-construcción-de-un-árbol-de-decisión" class="nav-link" data-scroll-target="#construcción-de-un-árbol-de-decisión">Construcción de un Árbol de Decisión</a></li>
  </ul></li>
  <li><a href="#características-de-decision-trees" id="toc-características-de-decision-trees" class="nav-link" data-scroll-target="#características-de-decision-trees">Características de Decision Trees</a></li>
  <li><a href="#inducción-en-decision-trees" id="toc-inducción-en-decision-trees" class="nav-link" data-scroll-target="#inducción-en-decision-trees">Inducción en Decision Trees</a>
  <ul>
  <li><a href="#construcción" id="toc-construcción" class="nav-link" data-scroll-target="#construcción">Construcción</a></li>
  <li><a href="#múltiples-árboles-de-decisión" id="toc-múltiples-árboles-de-decisión" class="nav-link" data-scroll-target="#múltiples-árboles-de-decisión">Múltiples árboles de decisión</a></li>
  <li><a href="#inducción" id="toc-inducción" class="nav-link" data-scroll-target="#inducción">Inducción</a></li>
  </ul></li>
  <li><a href="#medidas-de-impureza" id="toc-medidas-de-impureza" class="nav-link" data-scroll-target="#medidas-de-impureza">Medidas de Impureza</a></li>
  <li><a href="#ejemplo-práctico" id="toc-ejemplo-práctico" class="nav-link" data-scroll-target="#ejemplo-práctico">Ejemplo práctico</a>
  <ul>
  <li><a href="#ejemplo-1" id="toc-ejemplo-1" class="nav-link" data-scroll-target="#ejemplo-1">Ejemplo 1</a></li>
  <li><a href="#ejemplo-2" id="toc-ejemplo-2" class="nav-link" data-scroll-target="#ejemplo-2">Ejemplo 2</a></li>
  </ul></li>
  <li><a href="#ejemplo-3" id="toc-ejemplo-3" class="nav-link" data-scroll-target="#ejemplo-3">Ejemplo 3</a>
  <ul>
  <li><a href="#ejemplo-4" id="toc-ejemplo-4" class="nav-link" data-scroll-target="#ejemplo-4">Ejemplo 4</a></li>
  <li><a href="#ejemplo-5" id="toc-ejemplo-5" class="nav-link" data-scroll-target="#ejemplo-5">Ejemplo 5</a></li>
  <li><a href="#ejemplo-6-podar-el-árbol" id="toc-ejemplo-6-podar-el-árbol" class="nav-link" data-scroll-target="#ejemplo-6-podar-el-árbol">Ejemplo 6: Podar el árbol</a>
  <ul class="collapse">
  <li><a href="#usamos-validación-estándar-con-cp-como-hiperparámetro" id="toc-usamos-validación-estándar-con-cp-como-hiperparámetro" class="nav-link" data-scroll-target="#usamos-validación-estándar-con-cp-como-hiperparámetro">Usamos validación estándar con cp como hiperparámetro</a></li>
  </ul></li>
  <li><a href="#usando-el-criterio-del-min-xerror" id="toc-usando-el-criterio-del-min-xerror" class="nav-link" data-scroll-target="#usando-el-criterio-del-min-xerror">Usando el criterio del Min xerror</a></li>
  <li><a href="#usando-el-criterio-de--xstd" id="toc-usando-el-criterio-de--xstd" class="nav-link" data-scroll-target="#usando-el-criterio-de--xstd">Usando el criterio de +-xstd</a></li>
  <li><a href="#automatizando-la-selección-del-valor-óptimo-de-cp-criterio-min-xerror" id="toc-automatizando-la-selección-del-valor-óptimo-de-cp-criterio-min-xerror" class="nav-link" data-scroll-target="#automatizando-la-selección-del-valor-óptimo-de-cp-criterio-min-xerror">Automatizando la selección del Valor óptimo de CP (criterio Min xerror)</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Apuntes de clase</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="decision-trees" class="level2">
<h2 class="anchored" data-anchor-id="decision-trees">Decision Trees</h2>
<ul>
<li><p>Sirven para predicción <strong>numérica</strong> (<em>regresión</em>) y <strong>categórica</strong> (<em>clasificación</em>).</p></li>
<li><p>Es un modelo <strong>muy fácil de interpretar</strong>, útil para <strong>inferencia</strong>.</p></li>
<li><p>Este modelo tiene <strong>alta variabilidad</strong> (válido para todo modelo de árboles).</p></li>
<li><p>Es <strong>tan flexible</strong>, que fácilmente produce <strong>sobreajustes</strong>.</p></li>
<li><p>Es un modelo <strong>escalable</strong>.</p></li>
<li><p>Este modelo no genera <em>directamente</em> la <strong>probabilidad</strong> de pertenencia a una clase, sino la clasificación en sí.</p>
<ul>
<li>Aún así, se puede <strong>estimar la probabilidad</strong> de pertenencia a una clase <span class="math inline">\(K\)</span> , contando la proporción de observaciones (de la muestra) que fue clasificada como clase <span class="math inline">\(K\)</span> .</li>
<li>Sin embargo, cualquier observación pertenciente al <strong>mismo nodo</strong> posee la misma probabilidad <strong>estimada</strong> de pertenencia a una clase.</li>
<li>Por ello, la <strong>curva ROC</strong> de este modelo es <strong>muy poligonal</strong> … no funciona tan bien.</li>
</ul></li>
</ul>
<section id="partes-de-un-árbol-de-decisión" class="level3">
<h3 class="anchored" data-anchor-id="partes-de-un-árbol-de-decisión">Partes de un Árbol de Decisión</h3>
<ul>
<li><p><strong>Nodo interno (root node)</strong>: Denota una prueba sobre un atributo.</p></li>
<li><p><strong>Rama (branch)</strong>: Corresponde a un <em>valor</em> de atributo; representa el resultado de una prueba.</p></li>
<li><p><strong>Nodo terminal (leaf node)</strong>: Representa una <em>etiqueta</em> de clase.</p></li>
<li><p>Cada camino es una conjunción de valores de atributos.</p></li>
</ul>
</section>
<section id="construcción-de-un-árbol-de-decisión" class="level3">
<h3 class="anchored" data-anchor-id="construcción-de-un-árbol-de-decisión">Construcción de un Árbol de Decisión</h3>
<ul>
<li>Existen <strong>diversos</strong> <em>tree induction algorithms</em>, los cuales pueden generar árboles de decisión <strong>muy diferentes</strong>.</li>
</ul>
</section>
</section>
<section id="características-de-decision-trees" class="level2">
<h2 class="anchored" data-anchor-id="características-de-decision-trees">Características de Decision Trees</h2>
<ul>
<li><p>Este modelo se puede <em>construir rápidamente</em>.</p></li>
<li><p><strong>No requiere que las variables sean independientes</strong>.</p></li>
<li><p>Permite evaluar qué <strong>variables son importantes</strong> y cómo interactúan ente ellos.</p></li>
<li><p>Es <strong>robusto a outliers</strong>.</p></li>
<li><p>Funciona bien incluso cuando hay <strong>variables faltantes en observaciones</strong> (datos perdidos).</p></li>
<li><p>Las variables se discretizan al momemto de generar el árbol de decisión. Esto se evidencia para predictores numéricos, pues, nodo por nodo, se discretizan en dos categorías/regiones vía un <strong>punto de corte</strong>.</p></li>
</ul>
</section>
<section id="inducción-en-decision-trees" class="level2">
<h2 class="anchored" data-anchor-id="inducción-en-decision-trees">Inducción en Decision Trees</h2>
<ul>
<li><p><strong>Construcción</strong> del árbol:</p>
<ul>
<li>A la hora de fijar un punto de <strong>corte</strong>, podemos calcular la entropía asociada a las nuevas regiones creadas, teniendo en cuenta que <strong>entropía igual a cero</strong> maximiza la probabilidad de realizar una buena clasificación.</li>
</ul></li>
<li><p><strong>Poda</strong> del árbol: Identificar y remover ramas que causen ruido o tengan outliers.</p></li>
<li><p>El que se divida una región en <strong>dos subregiones</strong> no depende de si la variable es numérica o categórica, sino del <strong>algoritmo de inducción empleado</strong>.</p></li>
</ul>
<section id="construcción" class="level3">
<h3 class="anchored" data-anchor-id="construcción">Construcción</h3>
</section>
<section id="múltiples-árboles-de-decisión" class="level3">
<h3 class="anchored" data-anchor-id="múltiples-árboles-de-decisión">Múltiples árboles de decisión</h3>
</section>
<section id="inducción" class="level3">
<h3 class="anchored" data-anchor-id="inducción">Inducción</h3>
</section>
</section>
<section id="medidas-de-impureza" class="level2">
<h2 class="anchored" data-anchor-id="medidas-de-impureza">Medidas de Impureza</h2>
<ul>
<li><p>Coeficiente de Gini</p></li>
<li><p>Entropía</p></li>
<li><p><strong>Mayor valor</strong> de estas medidas, implica <strong>mayor impureza del nodo terminal</strong>.</p></li>
<li><p>A mayor impureza, sería más difícil saber a que categoría pertenece una observación presente en un nodo terminal.</p></li>
<li><p><strong>Coeficiente de Gini</strong> asociado a una partición que produce nodos terminales es el <strong>promedio ponderado</strong> de los coeficientes de Gini de aquellos nodos terminales, donde la ponderación es respecto al número de observaciones en cada nodo terminal.</p></li>
<li><p>Nodos con medida de impureza igual a cero no se dividen más, pues no es necesario.</p></li>
</ul>
</section>
<section id="ejemplo-práctico" class="level2">
<h2 class="anchored" data-anchor-id="ejemplo-práctico">Ejemplo práctico</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rpart)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'rpart' was built under R version 4.1.3</code></pre>
</div>
</div>
<ul>
<li><code>minsplit</code>:
<ul>
<li>Minimum number of observations in a node para que sea dividido.</li>
<li>Default value: 20</li>
<li>Suele no ser necesario alterar si se cuenta con <strong>muchos datos</strong>.</li>
</ul></li>
<li><code>minbucket</code>:
<ul>
<li>Minimum number of observations in any terminal/leaf node.</li>
<li>Default value: <code>minsplit / 3</code></li>
</ul></li>
<li><code>cp</code>:
<ul>
<li><strong>Parámetro de complejidad</strong></li>
<li><strong>Valor más común por modificar</strong> al usar el modelo Decision Tree.</li>
<li>Indica que, si el criterio de impureza <strong>no es reducido</strong> (<strong>restando</strong> las métricas de complejidad (no quotient)) en más de <code>cp</code> (<strong>respecto al nivel anterior</strong>) entonces, <strong>se para</strong>.</li>
<li>Default value: <code>cp = 0.01</code></li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>bupa <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">"../datos/bupa.txt"</span>, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">sep =</span> <span class="st">","</span>) </span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(bupa)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  V1 V2 V3 V4 V5 V6 V7
1 85 92 45 27 31  0  1
2 85 64 59 32 23  0  2
3 86 54 33 16 54  0  2
4 91 78 34 24 36  0  2
5 87 70 12 28 10  0  2
6 98 55 13 17 17  0  2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Declarar V7 como un factor</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>bupa[,<span class="dv">7</span>] <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(bupa[,<span class="dv">7</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="ejemplo-1" class="level3">
<h3 class="anchored" data-anchor-id="ejemplo-1">Ejemplo 1</h3>
<ul>
<li>Consideramos:
<ul>
<li><code>minbucket = 50</code></li>
<li><code>minsplit = 150</code></li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Estimar el árbol</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>arbol1 <span class="ot">&lt;-</span> <span class="fu">rpart</span>(</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  V7 <span class="sc">~</span> V3 <span class="sc">+</span> V5, <span class="at">data =</span> bupa, <span class="at">method =</span> <span class="st">"class"</span>, <span class="at">minbucket =</span> <span class="dv">50</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>arbol1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>n= 345 

node), split, n, loss, yval, (yprob)
      * denotes terminal node

1) root 345 145 2 (0.4202899 0.5797101)  
  2) V5&lt; 20.5 140  61 1 (0.5642857 0.4357143) *
  3) V5&gt;=20.5 205  66 2 (0.3219512 0.6780488) *</code></pre>
</div>
</div>
<ul>
<li><strong>Interpretación</strong>:
<ul>
<li>61 <strong>predicciones incorrectas</strong>, de un total de 140 observaciones, en el nodo terminal asociado a <code>V5 &lt; 20.5</code>.</li>
<li>66 <strong>predicciones incorrectas</strong>, de un total de 205 observaciones, en el nodo terminal asociado a <code>V5 &lt; 20.5</code>.</li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Graficando el arbol</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(arbol1, <span class="at">margin =</span> <span class="fl">0.25</span>)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="fu">text</span>(arbol1, <span class="at">use.n =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="clase-09_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Mejoramos los gráficos</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(partykit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'partykit' was built under R version 4.1.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: grid</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: libcoin</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'libcoin' was built under R version 4.1.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: mvtnorm</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(partykit<span class="sc">::</span><span class="fu">as.party</span>(arbol1), <span class="at">tp_args =</span> <span class="fu">list</span>(<span class="at">id =</span> <span class="cn">FALSE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="clase-09_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="ejemplo-2" class="level3">
<h3 class="anchored" data-anchor-id="ejemplo-2">Ejemplo 2</h3>
<p>Fijamos <code>minbucket = 20 (minsplit = 60)</code> para obtener un árbol con más ramas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>arbol2 <span class="ot">&lt;-</span> <span class="fu">rpart</span>(</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  V7 <span class="sc">~</span> V3 <span class="sc">+</span> V5, <span class="at">data =</span> bupa, <span class="at">method =</span> <span class="st">"class"</span>, <span class="at">minbucket =</span> <span class="dv">20</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">as.party</span>(arbol2), <span class="at">tp_args =</span> <span class="fu">list</span>(<span class="at">id =</span> <span class="cn">FALSE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="clase-09_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="ejemplo-3" class="level2">
<h2 class="anchored" data-anchor-id="ejemplo-3">Ejemplo 3</h2>
<p>Fijamos <code>cp = 0.05</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>arbol3 <span class="ot">&lt;-</span> <span class="fu">rpart</span>(</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  V7 <span class="sc">~</span> V3 <span class="sc">+</span> V5, <span class="at">data =</span> bupa, <span class="at">method =</span> <span class="st">"class"</span>, <span class="at">cp =</span> <span class="fl">0.05</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">as.party</span>(arbol3), <span class="at">tp_args =</span> <span class="fu">list</span>(<span class="at">id =</span> <span class="cn">FALSE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="clase-09_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<section id="ejemplo-4" class="level3">
<h3 class="anchored" data-anchor-id="ejemplo-4">Ejemplo 4</h3>
<p>Fijamos <code>cp = 0.001</code> para obtener un árbol con más ramas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>arbol4 <span class="ot">&lt;-</span> <span class="fu">rpart</span>(</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  V7 <span class="sc">~</span> V3 <span class="sc">+</span> V5, <span class="at">data =</span> bupa, <span class="at">method =</span> <span class="st">"class"</span>, <span class="at">cp =</span> <span class="fl">0.001</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">as.party</span>(arbol4), <span class="at">tp_args =</span> <span class="fu">list</span>(<span class="at">id =</span> <span class="cn">FALSE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="clase-09_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="ejemplo-5" class="level3">
<h3 class="anchored" data-anchor-id="ejemplo-5">Ejemplo 5</h3>
<p>Fijamos <code>maxdepth = 3</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>arbol5 <span class="ot">&lt;-</span> <span class="fu">rpart</span>(</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  V7 <span class="sc">~</span> V3 <span class="sc">+</span> V5, <span class="at">data =</span> bupa, <span class="at">method =</span> <span class="st">"class"</span>, <span class="at">maxdepth =</span> <span class="dv">3</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">as.party</span>(arbol5), <span class="at">tp_args =</span> <span class="fu">list</span>(<span class="at">id =</span> <span class="cn">FALSE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="clase-09_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="ejemplo-6-podar-el-árbol" class="level3">
<h3 class="anchored" data-anchor-id="ejemplo-6-podar-el-árbol">Ejemplo 6: Podar el árbol</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">060717</span>)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co"># A propósito dejamos crecer mucho el árbol, fijando</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="co"># un valor vajo de cp .</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>arbol <span class="ot">&lt;-</span> <span class="fu">rpart</span>(</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  V7<span class="sc">~</span> V3 <span class="sc">+</span> V5, <span class="at">data =</span> bupa, <span class="at">method =</span> <span class="st">"class"</span>, <span class="at">cp =</span> <span class="fl">0.001</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Fijar un criterio para podar el árbol</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>arbol6 <span class="ot">&lt;-</span> rpart<span class="sc">::</span><span class="fu">prune</span>(arbol, <span class="at">cp =</span> <span class="fl">0.1</span>)</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">as.party</span>(arbol), <span class="at">tp_args =</span> <span class="fu">list</span>(<span class="at">id =</span> <span class="cn">FALSE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="clase-09_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">as.party</span>(arbol6), <span class="at">tp_args =</span> <span class="fu">list</span>(<span class="at">id =</span> <span class="cn">FALSE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="clase-09_files/figure-html/unnamed-chunk-10-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<section id="usamos-validación-estándar-con-cp-como-hiperparámetro" class="level4">
<h4 class="anchored" data-anchor-id="usamos-validación-estándar-con-cp-como-hiperparámetro">Usamos validación estándar con cp como hiperparámetro</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Elección del modelo con métrica menor (error) o mejor (accuracy, por ejemplo)</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>rpart<span class="sc">::</span><span class="fu">printcp</span>(arbol)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Classification tree:
rpart(formula = V7 ~ V3 + V5, data = bupa, method = "class", 
    cp = 0.001)

Variables actually used in tree construction:
[1] V3 V5

Root node error: 145/345 = 0.42029

n= 345 

         CP nsplit rel error  xerror     xstd
1 0.1379310      0   1.00000 1.00000 0.063230
2 0.0206897      2   0.72414 0.75862 0.059697
3 0.0137931      6   0.63448 0.75172 0.059551
4 0.0114943      7   0.62069 0.78621 0.060253
5 0.0068966     10   0.58621 0.77241 0.059980
6 0.0034483     12   0.57241 0.82069 0.060891
7 0.0010000     16   0.55862 0.87586 0.061781</code></pre>
</div>
</div>
<p>La columna <code>rel error</code> (relative error) no nos sirve, pues esos valores siempre están decreciendo, ya que la impureza siempre diminuye para niveles más altos del árbol.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Elección del modelo vía la regla del error estándar</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>rpart<span class="sc">::</span><span class="fu">plotcp</span>(arbol)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="clase-09_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>En el eje X están las medias geométricas, de dos en dos, de valores de CP en la tabla mostrada previamente.</p>
</section>
</section>
<section id="usando-el-criterio-del-min-xerror" class="level3">
<h3 class="anchored" data-anchor-id="usando-el-criterio-del-min-xerror">Usando el criterio del Min xerror</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>arbol7 <span class="ot">&lt;-</span> <span class="fu">prune</span>(arbol, <span class="at">cp =</span> <span class="fl">0.0137931</span>)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">as.party</span>(arbol7), <span class="at">tp_args =</span> <span class="fu">list</span>(<span class="at">id =</span> <span class="cn">FALSE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="clase-09_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="usando-el-criterio-de--xstd" class="level3">
<h3 class="anchored" data-anchor-id="usando-el-criterio-de--xstd">Usando el criterio de +-xstd</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>arbol7 <span class="ot">&lt;-</span> <span class="fu">prune</span>(arbol, <span class="at">cp =</span> <span class="fl">0.053</span>)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">as.party</span>(arbol7), <span class="at">tp_args =</span> <span class="fu">list</span>(<span class="at">id =</span> <span class="cn">FALSE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="clase-09_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="automatizando-la-selección-del-valor-óptimo-de-cp-criterio-min-xerror" class="level3">
<h3 class="anchored" data-anchor-id="automatizando-la-selección-del-valor-óptimo-de-cp-criterio-min-xerror">Automatizando la selección del Valor óptimo de CP (criterio Min xerror)</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>arbol.completo <span class="ot">&lt;-</span> <span class="fu">rpart</span>(</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  V7 <span class="sc">~</span> ., <span class="at">data =</span> bupa, <span class="at">method =</span> <span class="st">"class"</span>, <span class="at">cp =</span> <span class="dv">0</span>, <span class="at">minbucket =</span> <span class="dv">1</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>arbol.completo</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>n= 345 

node), split, n, loss, yval, (yprob)
      * denotes terminal node

  1) root 345 145 2 (0.42028986 0.57971014)  
    2) V5&lt; 20.5 140  61 1 (0.56428571 0.43571429)  
      4) V3&gt;=19.5 80  20 1 (0.75000000 0.25000000)  
        8) V4&lt; 21.5 43   5 1 (0.88372093 0.11627907)  
         16) V6&lt; 3.5 35   2 1 (0.94285714 0.05714286)  
           32) V1&gt;=85.5 31   0 1 (1.00000000 0.00000000) *
           33) V1&lt; 85.5 4   2 1 (0.50000000 0.50000000)  
             66) V1&lt; 83.5 2   0 1 (1.00000000 0.00000000) *
             67) V1&gt;=83.5 2   0 2 (0.00000000 1.00000000) *
         17) V6&gt;=3.5 8   3 1 (0.62500000 0.37500000)  
           34) V3&gt;=23.5 5   0 1 (1.00000000 0.00000000) *
           35) V3&lt; 23.5 3   0 2 (0.00000000 1.00000000) *
        9) V4&gt;=21.5 37  15 1 (0.59459459 0.40540541)  
         18) V1&gt;=88.5 22   5 1 (0.77272727 0.22727273)  
           36) V4&gt;=24.5 14   1 1 (0.92857143 0.07142857) *
           37) V4&lt; 24.5 8   4 1 (0.50000000 0.50000000)  
             74) V6&gt;=5 2   0 1 (1.00000000 0.00000000) *
             75) V6&lt; 5 6   2 2 (0.33333333 0.66666667)  
              150) V2&gt;=63.5 3   1 1 (0.66666667 0.33333333)  
                300) V2&lt; 74 2   0 1 (1.00000000 0.00000000) *
                301) V2&gt;=74 1   0 2 (0.00000000 1.00000000) *
              151) V2&lt; 63.5 3   0 2 (0.00000000 1.00000000) *
         19) V1&lt; 88.5 15   5 2 (0.33333333 0.66666667)  
           38) V3&gt;=29.5 3   0 1 (1.00000000 0.00000000) *
           39) V3&lt; 29.5 12   2 2 (0.16666667 0.83333333)  
             78) V2&gt;=81.5 1   0 1 (1.00000000 0.00000000) *
             79) V2&lt; 81.5 11   1 2 (0.09090909 0.90909091) *
      5) V3&lt; 19.5 60  19 2 (0.31666667 0.68333333)  
       10) V2&gt;=77 16   5 1 (0.68750000 0.31250000)  
         20) V1&gt;=88.5 12   2 1 (0.83333333 0.16666667)  
           40) V2&lt; 125 11   1 1 (0.90909091 0.09090909)  
             80) V1&gt;=89.5 8   0 1 (1.00000000 0.00000000) *
             81) V1&lt; 89.5 3   1 1 (0.66666667 0.33333333)  
              162) V3&lt; 17.5 2   0 1 (1.00000000 0.00000000) *
              163) V3&gt;=17.5 1   0 2 (0.00000000 1.00000000) *
           41) V2&gt;=125 1   0 2 (0.00000000 1.00000000) *
         21) V1&lt; 88.5 4   1 2 (0.25000000 0.75000000)  
           42) V1&lt; 85.5 1   0 1 (1.00000000 0.00000000) *
           43) V1&gt;=85.5 3   0 2 (0.00000000 1.00000000) *
       11) V2&lt; 77 44   8 2 (0.18181818 0.81818182)  
         22) V4&lt; 14.5 6   2 1 (0.66666667 0.33333333)  
           44) V1&gt;=91.5 3   0 1 (1.00000000 0.00000000) *
           45) V1&lt; 91.5 3   1 2 (0.33333333 0.66666667)  
             90) V2&gt;=60 1   0 1 (1.00000000 0.00000000) *
             91) V2&lt; 60 2   0 2 (0.00000000 1.00000000) *
         23) V4&gt;=14.5 38   4 2 (0.10526316 0.89473684)  
           46) V6&lt; 3.5 23   4 2 (0.17391304 0.82608696)  
             92) V5&gt;=18.5 1   0 1 (1.00000000 0.00000000) *
             93) V5&lt; 18.5 22   3 2 (0.13636364 0.86363636)  
              186) V6&gt;=2.5 1   0 1 (1.00000000 0.00000000) *
              187) V6&lt; 2.5 21   2 2 (0.09523810 0.90476190)  
                374) V5&gt;=14.5 8   2 2 (0.25000000 0.75000000)  
                  748) V5&lt; 15.5 2   0 1 (1.00000000 0.00000000) *
                  749) V5&gt;=15.5 6   0 2 (0.00000000 1.00000000) *
                375) V5&lt; 14.5 13   0 2 (0.00000000 1.00000000) *
           47) V6&gt;=3.5 15   0 2 (0.00000000 1.00000000) *
    3) V5&gt;=20.5 205  66 2 (0.32195122 0.67804878)  
      6) V6&gt;=5.5 69  33 2 (0.47826087 0.52173913)  
       12) V3&gt;=35.5 35  12 1 (0.65714286 0.34285714)  
         24) V4&lt; 42.5 25   5 1 (0.80000000 0.20000000)  
           48) V2&lt; 86.5 19   1 1 (0.94736842 0.05263158)  
             96) V1&gt;=84.5 18   0 1 (1.00000000 0.00000000) *
             97) V1&lt; 84.5 1   0 2 (0.00000000 1.00000000) *
           49) V2&gt;=86.5 6   2 2 (0.33333333 0.66666667)  
             98) V2&gt;=123 1   0 1 (1.00000000 0.00000000) *
             99) V2&lt; 123 5   1 2 (0.20000000 0.80000000)  
              198) V3&gt;=57.5 1   0 1 (1.00000000 0.00000000) *
              199) V3&lt; 57.5 4   0 2 (0.00000000 1.00000000) *
         25) V4&gt;=42.5 10   3 2 (0.30000000 0.70000000)  
           50) V1&gt;=96.5 3   0 1 (1.00000000 0.00000000) *
           51) V1&lt; 96.5 7   0 2 (0.00000000 1.00000000) *
       13) V3&lt; 35.5 34  10 2 (0.29411765 0.70588235)  
         26) V4&lt; 22.5 10   4 1 (0.60000000 0.40000000)  
           52) V2&lt; 75.5 6   1 1 (0.83333333 0.16666667) *
           53) V2&gt;=75.5 4   1 2 (0.25000000 0.75000000)  
            106) V1&lt; 85 1   0 1 (1.00000000 0.00000000) *
            107) V1&gt;=85 3   0 2 (0.00000000 1.00000000) *
         27) V4&gt;=22.5 24   4 2 (0.16666667 0.83333333)  
           54) V2&gt;=92.5 6   3 1 (0.50000000 0.50000000)  
            108) V1&gt;=91.5 4   1 1 (0.75000000 0.25000000)  
              216) V3&gt;=21.5 3   0 1 (1.00000000 0.00000000) *
              217) V3&lt; 21.5 1   0 2 (0.00000000 1.00000000) *
            109) V1&lt; 91.5 2   0 2 (0.00000000 1.00000000) *
           55) V2&lt; 92.5 18   1 2 (0.05555556 0.94444444) *
      7) V6&lt; 5.5 136  33 2 (0.24264706 0.75735294)  
       14) V2&gt;=65.5 75  26 2 (0.34666667 0.65333333)  
         28) V4&lt; 24.5 41  20 1 (0.51219512 0.48780488)  
           56) V6&lt; 2.5 27   9 1 (0.66666667 0.33333333)  
            112) V5&lt; 29.5 11   1 1 (0.90909091 0.09090909) *
            113) V5&gt;=29.5 16   8 1 (0.50000000 0.50000000)  
              226) V1&gt;=87.5 10   3 1 (0.70000000 0.30000000)  
                452) V1&lt; 92.5 8   1 1 (0.87500000 0.12500000)  
                  904) V6&gt;=0.25 7   0 1 (1.00000000 0.00000000) *
                  905) V6&lt; 0.25 1   0 2 (0.00000000 1.00000000) *
                453) V1&gt;=92.5 2   0 2 (0.00000000 1.00000000) *
              227) V1&lt; 87.5 6   1 2 (0.16666667 0.83333333)  
                454) V1&lt; 80.5 1   0 1 (1.00000000 0.00000000) *
                455) V1&gt;=80.5 5   0 2 (0.00000000 1.00000000) *
           57) V6&gt;=2.5 14   3 2 (0.21428571 0.78571429)  
            114) V2&lt; 69 2   0 1 (1.00000000 0.00000000) *
            115) V2&gt;=69 12   1 2 (0.08333333 0.91666667) *
         29) V4&gt;=24.5 34   5 2 (0.14705882 0.85294118)  
           58) V3&gt;=39 15   5 2 (0.33333333 0.66666667)  
            116) V3&lt; 45.5 6   2 1 (0.66666667 0.33333333)  
              232) V5&lt; 106 5   1 1 (0.80000000 0.20000000) *
              233) V5&gt;=106 1   0 2 (0.00000000 1.00000000) *
            117) V3&gt;=45.5 9   1 2 (0.11111111 0.88888889)  
              234) V1&lt; 85 3   1 2 (0.33333333 0.66666667)  
                468) V5&gt;=70.5 1   0 1 (1.00000000 0.00000000) *
                469) V5&lt; 70.5 2   0 2 (0.00000000 1.00000000) *
              235) V1&gt;=85 6   0 2 (0.00000000 1.00000000) *
           59) V3&lt; 39 19   0 2 (0.00000000 1.00000000) *
       15) V2&lt; 65.5 61   7 2 (0.11475410 0.88524590)  
         30) V5&gt;=26.5 42   7 2 (0.16666667 0.83333333)  
           60) V5&lt; 35.5 15   5 2 (0.33333333 0.66666667)  
            120) V6&gt;=0.75 10   5 1 (0.50000000 0.50000000)  
              240) V1&gt;=89 5   1 1 (0.80000000 0.20000000)  
                480) V2&gt;=50 4   0 1 (1.00000000 0.00000000) *
                481) V2&lt; 50 1   0 2 (0.00000000 1.00000000) *
              241) V1&lt; 89 5   1 2 (0.20000000 0.80000000)  
                482) V1&lt; 83 1   0 1 (1.00000000 0.00000000) *
                483) V1&gt;=83 4   0 2 (0.00000000 1.00000000) *
            121) V6&lt; 0.75 5   0 2 (0.00000000 1.00000000) *
           61) V5&gt;=35.5 27   2 2 (0.07407407 0.92592593)  
            122) V4&lt; 23.5 11   2 2 (0.18181818 0.81818182)  
              244) V4&gt;=22.5 3   1 1 (0.66666667 0.33333333)  
                488) V1&lt; 92.5 2   0 1 (1.00000000 0.00000000) *
                489) V1&gt;=92.5 1   0 2 (0.00000000 1.00000000) *
              245) V4&lt; 22.5 8   0 2 (0.00000000 1.00000000) *
            123) V4&gt;=23.5 16   0 2 (0.00000000 1.00000000) *
         31) V5&lt; 26.5 19   0 2 (0.00000000 1.00000000) *</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>xerr <span class="ot">&lt;-</span> arbol.completo<span class="sc">$</span>cptable[,<span class="st">"xerror"</span>]</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>minxerr <span class="ot">&lt;-</span> <span class="fu">which.min</span>(xerr)</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>mincp <span class="ot">&lt;-</span> arbol.completo<span class="sc">$</span>cptable[minxerr, <span class="st">"CP"</span>]</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>arbol.prune <span class="ot">&lt;-</span> <span class="fu">prune</span>(arbol.completo, <span class="at">cp =</span> mincp)</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">as.party</span>(arbol.prune), <span class="at">tp_args =</span> <span class="fu">list</span>(<span class="at">id =</span> <span class="cn">FALSE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="clase-09_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Predicción usando el árbol podado</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcular los valores predichos</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(arbol.prune, bupa[,<span class="fu">c</span>(<span class="sc">-</span><span class="dv">7</span>)], <span class="at">type =</span> <span class="st">"class"</span>)</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcular la matriz de confusión</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>caret<span class="sc">::</span><span class="fu">confusionMatrix</span>(pred, bupa<span class="sc">$</span>V7)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Confusion Matrix and Statistics

          Reference
Prediction   1   2
         1  60  20
         2  85 180
                                          
               Accuracy : 0.6957          
                 95% CI : (0.6441, 0.7438)
    No Information Rate : 0.5797          
    P-Value [Acc &gt; NIR] : 5.902e-06       
                                          
                  Kappa : 0.3344          
                                          
 Mcnemar's Test P-Value : 4.217e-10       
                                          
            Sensitivity : 0.4138          
            Specificity : 0.9000          
         Pos Pred Value : 0.7500          
         Neg Pred Value : 0.6792          
             Prevalence : 0.4203          
         Detection Rate : 0.1739          
   Detection Prevalence : 0.2319          
      Balanced Accuracy : 0.6569          
                                          
       'Positive' Class : 1               
                                          </code></pre>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../apuntes/clase-08.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Apuntes de clase</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../apuntes/clase-11.html" class="pagination-link">
        <span class="nav-page-text">Apuntes de clase</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>