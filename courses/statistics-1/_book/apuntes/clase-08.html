<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Statistical Learning 1 - Apuntes de clase</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../apuntes/clase-09.html" rel="next">
<link href="../apuntes/clase-07.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script type="module">
  document.addEventListener(
    "DOMContentLoaded",
    function () {
      const sidebarSections = Array.from(
        document.querySelectorAll(".sidebar-section")
      );

      // Hide each section's content menu, 
      // if there more than 4 sections
      if (sidebarSections.length > 4) {
        sidebarSections.forEach(function(section) {
          section.classList.remove("show");
        });
      }
    }
  )
</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../style.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../apuntes/clase-08.html">Semana 8</a></li><li class="breadcrumb-item"><a href="../apuntes/clase-08.html">Apuntes de clase</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Statistical Learning 1</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">SÃ­labo</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Semana 1</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../apuntes/clase-01.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Apuntes de clase</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Semana 2</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../apuntes/clase-02.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Apuntes de clase</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Semana 3</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../apuntes/clase-03.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Apuntes de clase</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">Semana 4</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../apuntes/clase-04.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Apuntes de clase</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text">Semana 5</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../apuntes/clase-05.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Apuntes de clase</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">
 <span class="menu-text">Semana 6</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../apuntes/clase-06.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Apuntes de clase</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true">
 <span class="menu-text">Semana 7</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../apuntes/clase-07.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Apuntes de clase</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="true">
 <span class="menu-text">Semana 8</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../apuntes/clase-08.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Apuntes de clase</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="true">
 <span class="menu-text">Semana 9</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../apuntes/clase-09.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Apuntes de clase</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" aria-expanded="true">
 <span class="menu-text">Semana 11</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../apuntes/clase-11.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Apuntes de clase</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" aria-expanded="true">
 <span class="menu-text">Semana 12</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-11" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../apuntes/clase-12.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Apuntes de clase</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" aria-expanded="true">
 <span class="menu-text">Semana 13</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-12" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../apuntes/clase-13.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Apuntes de clase</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-13" aria-expanded="true">
 <span class="menu-text">Semana 14</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-13" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-13" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../apuntes/clase-14.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Apuntes de clase</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Tabla de Contenidos</h2>
   
  <ul>
  <li><a href="#remuestreo" id="toc-remuestreo" class="nav-link active" data-scroll-target="#remuestreo">Remuestreo</a>
  <ul>
  <li><a href="#validaciÃ³n-cruzada-cv" id="toc-validaciÃ³n-cruzada-cv" class="nav-link" data-scroll-target="#validaciÃ³n-cruzada-cv">ValidaciÃ³n Cruzada (CV)</a></li>
  <li><a href="#enfoque-para-validation-set" id="toc-enfoque-para-validation-set" class="nav-link" data-scroll-target="#enfoque-para-validation-set">Enfoque para validation set</a></li>
  </ul></li>
  <li><a href="#mÃ©todo-de-retenciÃ³n" id="toc-mÃ©todo-de-retenciÃ³n" class="nav-link" data-scroll-target="#mÃ©todo-de-retenciÃ³n">MÃ©todo de retenciÃ³n</a>
  <ul>
  <li><a href="#ejemplo-prÃ¡ctico" id="toc-ejemplo-prÃ¡ctico" class="nav-link" data-scroll-target="#ejemplo-prÃ¡ctico">Ejemplo prÃ¡ctico</a></li>
  </ul></li>
  <li><a href="#loocv" id="toc-loocv" class="nav-link" data-scroll-target="#loocv">LOOCV</a>
  <ul>
  <li><a href="#ejemplo-prÃ¡ctico-1" id="toc-ejemplo-prÃ¡ctico-1" class="nav-link" data-scroll-target="#ejemplo-prÃ¡ctico-1">Ejemplo prÃ¡ctico</a></li>
  </ul></li>
  <li><a href="#k-fold-cv" id="toc-k-fold-cv" class="nav-link" data-scroll-target="#k-fold-cv">k-fold CV</a>
  <ul>
  <li><a href="#ejemplo-prÃ¡ctico-2" id="toc-ejemplo-prÃ¡ctico-2" class="nav-link" data-scroll-target="#ejemplo-prÃ¡ctico-2">Ejemplo prÃ¡ctico</a></li>
  </ul></li>
  <li><a href="#elecciÃ³n-del-mejor-modelo" id="toc-elecciÃ³n-del-mejor-modelo" class="nav-link" data-scroll-target="#elecciÃ³n-del-mejor-modelo">ElecciÃ³n del mejor modelo</a>
  <ul>
  <li><a href="#regla-del-error-estÃ¡ndar" id="toc-regla-del-error-estÃ¡ndar" class="nav-link" data-scroll-target="#regla-del-error-estÃ¡ndar">Regla del error estÃ¡ndar</a></li>
  </ul></li>
  <li><a href="#comentarios-finales" id="toc-comentarios-finales" class="nav-link" data-scroll-target="#comentarios-finales">Comentarios finales</a></li>
  <li><a href="#bootstrap" id="toc-bootstrap" class="nav-link" data-scroll-target="#bootstrap">Bootstrap</a></li>
  <li><a href="#ejemplo-prÃ¡ctico-clasificaciÃ³n-de-buenos-pagaderos" id="toc-ejemplo-prÃ¡ctico-clasificaciÃ³n-de-buenos-pagaderos" class="nav-link" data-scroll-target="#ejemplo-prÃ¡ctico-clasificaciÃ³n-de-buenos-pagaderos">Ejemplo prÃ¡ctico: ClasificaciÃ³n de Buenos Pagaderos</a></li>
  <li><a href="#ejemplo-prÃ¡ctico-calibraciÃ³n-de-hiperparÃ¡metros-de-knn" id="toc-ejemplo-prÃ¡ctico-calibraciÃ³n-de-hiperparÃ¡metros-de-knn" class="nav-link" data-scroll-target="#ejemplo-prÃ¡ctico-calibraciÃ³n-de-hiperparÃ¡metros-de-knn">Ejemplo prÃ¡ctico: CalibraciÃ³n de hiperparÃ¡metros de KNN</a>
  <ul>
  <li><a href="#validaciÃ³n-cruzada-loocv" id="toc-validaciÃ³n-cruzada-loocv" class="nav-link" data-scroll-target="#validaciÃ³n-cruzada-loocv">ValidaciÃ³n Cruzada (LOOCV)</a></li>
  </ul></li>
  <li><a href="#examen-parcial" id="toc-examen-parcial" class="nav-link" data-scroll-target="#examen-parcial">Examen Parcial</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Apuntes de clase</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="remuestreo" class="level2">
<h2 class="anchored" data-anchor-id="remuestreo">Remuestreo</h2>
<section id="validaciÃ³n-cruzada-cv" class="level3">
<h3 class="anchored" data-anchor-id="validaciÃ³n-cruzada-cv">ValidaciÃ³n Cruzada (CV)</h3>
<div id="prp-" class="theorem proposition">
<p><span class="theorem-title"><strong>Proposition 1 </strong></span>CV <strong>no estima modelos</strong>; estima mÃ©tricas, las cuales usamos para comparar modelos.</p>
<p>CV nos provee de una <strong>estimaciÃ³n del valor esperado</strong> de una mÃ©trica (MSE, Accuracy, etc) asociada a un modelo de Aprendizaje EstadÃ­stico.</p>
</div>
<ul>
<li><p>Implica <strong>selecciÃ³n</strong>, no <em>evaluaciÃ³n</em>, del modelo.</p></li>
<li><p>Es influenciada por la <strong>mÃ©trica</strong> fijada para comparar datos (sea accuracy, etc).</p></li>
</ul>
</section>
<section id="enfoque-para-validation-set" class="level3">
<h3 class="anchored" data-anchor-id="enfoque-para-validation-set">Enfoque para validation set</h3>
<ul>
<li>Dividimos un conjunto de <span class="math inline">\(n\)</span> observaciones en dos partes:
<ul>
<li><em>Conjunto de entrenaminto</em> (para <strong>ajustar modelo</strong>)</li>
<li><em>Conjunto de validaciÃ³n</em> (para predecir la <em>response</em> de cada observaciÃ³n del validation set)</li>
</ul></li>
</ul>
</section>
</section>
<section id="mÃ©todo-de-retenciÃ³n" class="level2">
<h2 class="anchored" data-anchor-id="mÃ©todo-de-retenciÃ³n">MÃ©todo de retenciÃ³n</h2>
<section id="ejemplo-prÃ¡ctico" class="level3">
<h3 class="anchored" data-anchor-id="ejemplo-prÃ¡ctico">Ejemplo prÃ¡ctico</h3>
<div id="prp-" class="theorem proposition">
<p><span class="theorem-title"><strong>Proposition 2 </strong></span>El <strong>mÃ©todo de retenciÃ³n</strong> tiene <strong>alto sesgo</strong> (pues no se considera TODO el conjunto de datos) y <strong>alta variabilidad</strong> (debido a la aleatoriedad).</p>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ISLR2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'ISLR2' was built under R version 4.1.3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'ggplot2' was built under R version 4.1.3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggpubr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'ggpubr' was built under R version 4.1.3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(reshape2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'reshape2' was built under R version 4.1.3</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>n <span class="ot">=</span> <span class="fu">dim</span>(Auto)[<span class="dv">1</span>]</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 11 veces partiremos los datos en train y test</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 10 grados de polinomios consideraremos</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>testMSEmat <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">ncol =</span> <span class="dv">11</span>, <span class="at">nrow =</span> <span class="dv">10</span>)</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (newsample <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">11</span>) {</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  trainid <span class="ot">&lt;-</span> <span class="fu">sample</span>(n, n<span class="sc">/</span><span class="dv">2</span>)</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (polydeg <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>    lm.fit <span class="ot">&lt;-</span> <span class="fu">lm</span>(</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>      mpg <span class="sc">~</span> <span class="fu">poly</span>(horsepower, polydeg),</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">data =</span> Auto,</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>      <span class="at">subset =</span> trainid</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Predecimos para los datos de test</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>    lm.pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(lm.fit, Auto)[<span class="sc">-</span>trainid]</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>    testMSEmat[polydeg, newsample] <span class="ot">&lt;-</span> <span class="fu">mean</span>((Auto<span class="sc">$</span>mpg[<span class="sc">-</span>trainid] <span class="sc">-</span> lm.pred)<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>yrange <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">15</span>,<span class="dv">28</span>)</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Resultado para la primera selecciÃ³n</span></span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>plotdf <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="st">"testMSE"</span> <span class="ot">=</span> testMSEmat[,<span class="dv">1</span>], <span class="st">"degree"</span> <span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>g0 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(plotdf, <span class="fu">aes</span>(<span class="at">x =</span> degree)) <span class="sc">+</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">y =</span> testMSEmat[,<span class="dv">1</span>]) <span class="sc">+</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> yrange) <span class="sc">+</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) <span class="sc">+</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"MSE de conjunto de validaciÃ³n"</span>, </span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Grado del Polinomio"</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>g0 <span class="sc">+</span> <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="clase-08_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Comparando con las otras muestras</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>cols<span class="ot">=</span><span class="fu">rainbow</span>(<span class="dv">10</span>)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>g1<span class="ot">=</span>g0<span class="sc">+</span><span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,<span class="at">y=</span>testMSEmat[,<span class="dv">2</span>]),<span class="at">colour=</span>cols[<span class="dv">1</span>])</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (col <span class="cf">in</span> <span class="dv">3</span><span class="sc">:</span><span class="dv">11</span>) {</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  g1 <span class="ot">&lt;-</span> g1 <span class="sc">+</span> </span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>      <span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">y =</span> testMSEmat[,col]), <span class="at">colour =</span> cols[col <span class="sc">-</span> <span class="dv">1</span>]</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>g1valid <span class="ot">&lt;-</span> g1</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>g1valid</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="clase-08_files/figure-html/unnamed-chunk-3-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="loocv" class="level2">
<h2 class="anchored" data-anchor-id="loocv">LOOCV</h2>
<ul>
<li>Produce una estimaciÃ³n <strong>mÃ¡s confiables</strong> comparado al <em>mÃ©todo de retenciÃ³n</em>.</li>
</ul>
<div id="prp-" class="theorem proposition">
<p><span class="theorem-title"><strong>Proposition 3 </strong></span><strong>Poco sesgo</strong>, pues se usa casi todo el conjunto de datos para entrenamiento.</p>
<p>En este caso, se presenta <strong>alta varianza</strong>, pues la covarianza entre dos training sets (de los <span class="math inline">\(n\)</span> creados) es muy alta, pues ser la misma muestra, salvo a lo mÃ¡s dos observaciones.</p>
</div>
<ul>
<li><p><span class="math inline">\(MSE_i = \left( y_i - \hat{y_i} \right)^2\)</span></p></li>
<li><p><strong>Error total de predicciÃ³n</strong>: <span class="math inline">\(CV_n = \dfrac{1}{n} \displaystyle{ \sum_{i=1}^{n}MSE_i }\)</span></p></li>
<li><p>Funciona <strong>bastante bien para regresiÃ³n lineal</strong>.</p></li>
</ul>
<section id="ejemplo-prÃ¡ctico-1" class="level3">
<h3 class="anchored" data-anchor-id="ejemplo-prÃ¡ctico-1">Ejemplo prÃ¡ctico</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>n <span class="ot">=</span> <span class="fu">dim</span>(Auto)[<span class="dv">1</span>]</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>testMSEvec <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>start <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (polydeg <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  glm.fit <span class="ot">=</span> <span class="fu">glm</span>(mpg <span class="sc">~</span> <span class="fu">poly</span>(horsepower,polydeg), <span class="at">data =</span> Auto)</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  glm.cv1 <span class="ot">=</span> boot<span class="sc">::</span><span class="fu">cv.glm</span>(Auto, glm.fit, <span class="at">K =</span> n)</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Error cuadrÃ¡tico medio</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>  testMSEvec <span class="ot">=</span> <span class="fu">c</span>(testMSEvec, glm.cv1<span class="sc">$</span>delta[<span class="dv">1</span>])</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>stop <span class="ot">=</span> <span class="fu">Sys.time</span>()</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>yrange <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">28</span>)</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>plotdf <span class="ot">=</span> <span class="fu">data.frame</span>(<span class="at">testMSE =</span> testMSEvec, <span class="at">degree =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>g0 <span class="ot">=</span> <span class="fu">ggplot</span>(plotdf, <span class="fu">aes</span>(<span class="at">x =</span> degree, <span class="at">y =</span> testMSE)) <span class="sc">+</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> yrange) <span class="sc">+</span></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) <span class="sc">+</span></span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"LOOCV"</span>)</span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>g0 <span class="sc">+</span> <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="clase-08_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>stop <span class="sc">-</span> start</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Time difference of 22.83591 secs</code></pre>
</div>
</div>
</section>
</section>
<section id="k-fold-cv" class="level2">
<h2 class="anchored" data-anchor-id="k-fold-cv">k-fold CV</h2>
<ul>
<li><p>Procedimiento:</p>
<ul>
<li>Dividir los datos en <span class="math inline">\(k\)</span> partes <em>mÃ¡s o menos</em> iguales.</li>
<li>Utilizar <span class="math inline">\(k-1\)</span> partes para entrenar la <span class="math inline">\(k\)</span>-Ã©sima parte para validar.</li>
<li>Hacer esto <span class="math inline">\(k\)</span> veces, omitiendo otra parte en cada <span class="math inline">\(k\)</span> ronda.</li>
</ul></li>
<li><p><span class="math inline">\(CV_k = \displaystyle{ \dfrac{1}{k}\sum_{i=1}^{k} MSE_i}\)</span></p></li>
<li><p><span class="math inline">\(CV_k = \displaystyle{ \dfrac{1}{n}\sum_{i=1}^{k} n_i * MSE_i}\)</span></p></li>
<li><p>Note que el caso <span class="math inline">\(k=n\)</span> consiste es <strong>LOOCV</strong>.</p></li>
</ul>
<div id="prp-" class="theorem proposition">
<p><span class="theorem-title"><strong>Proposition 4 </strong></span>Presenta cierta variabilidad, debido a la aleatoriedad; y puede ser alta cuando <span class="math inline">\(k=n\)</span> (caso determinista) incluso.</p>
<p>El sesgo es menor cuando <span class="math inline">\(k=n\)</span>, pero suele usarse <span class="math inline">\(k=5\)</span> o <span class="math inline">\(k=10\)</span> .</p>
</div>
<section id="ejemplo-prÃ¡ctico-2" class="level3">
<h3 class="anchored" data-anchor-id="ejemplo-prÃ¡ctico-2">Ejemplo prÃ¡ctico</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>testMSEvec5 <span class="ot">=</span> <span class="cn">NULL</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>testMSEvec10 <span class="ot">=</span> <span class="cn">NULL</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>start <span class="ot">=</span> <span class="fu">Sys.time</span>()</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (polydeg <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>  glm.fit <span class="ot">=</span> <span class="fu">glm</span>(mpg <span class="sc">~</span> <span class="fu">poly</span>(horsepower, polydeg), <span class="at">data =</span> Auto)</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>  glm.cv5 <span class="ot">=</span> boot<span class="sc">::</span><span class="fu">cv.glm</span>(Auto, glm.fit, <span class="at">K =</span> <span class="dv">5</span>)</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>  glm.cv10 <span class="ot">=</span> boot<span class="sc">::</span><span class="fu">cv.glm</span>(Auto, glm.fit, <span class="at">K =</span> <span class="dv">10</span>)</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>  testMSEvec5 <span class="ot">=</span> <span class="fu">c</span>(testMSEvec5, glm.cv5<span class="sc">$</span>delta[<span class="dv">1</span>])</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>  testMSEvec10 <span class="ot">=</span> <span class="fu">c</span>(testMSEvec10, glm.cv10<span class="sc">$</span>delta[<span class="dv">1</span>])</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>stop <span class="ot">=</span> <span class="fu">Sys.time</span>()</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>yrange <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">15</span>,<span class="dv">28</span>)</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>plotdf <span class="ot">=</span> <span class="fu">data.frame</span>(<span class="at">testMSE5  =</span>testMSEvec5, <span class="at">degree =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>g0 <span class="ot">=</span> <span class="fu">ggplot</span>(plotdf, <span class="fu">aes</span>(<span class="at">x =</span> degree, <span class="at">y =</span> testMSE5))  <span class="sc">+</span></span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> yrange) <span class="sc">+</span></span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) <span class="sc">+</span></span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"CV"</span>) <span class="sc">+</span></span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"5 and 10 fold CV"</span>)</span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a>g0 <span class="sc">+</span></span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> testMSEvec10), <span class="at">colour =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">y =</span> testMSEvec10), <span class="at">colour =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"5 fold (black), 10 fold (red)"</span>) <span class="sc">+</span></span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="clase-08_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>stop <span class="sc">-</span> start</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Time difference of 1.733926 secs</code></pre>
</div>
</div>
</section>
</section>
<section id="elecciÃ³n-del-mejor-modelo" class="level2">
<h2 class="anchored" data-anchor-id="elecciÃ³n-del-mejor-modelo">ElecciÃ³n del mejor modelo</h2>
<section id="regla-del-error-estÃ¡ndar" class="level3">
<h3 class="anchored" data-anchor-id="regla-del-error-estÃ¡ndar">Regla del error estÃ¡ndar</h3>
</section>
</section>
<section id="comentarios-finales" class="level2">
<h2 class="anchored" data-anchor-id="comentarios-finales">Comentarios finales</h2>
<ul>
<li>Es posible usar <span class="math inline">\(CV\)</span> para la evaluaciÃ³n de modelos, tratando a conjuntos de validaciÃ³n como conjuntos de <strong>prueba</strong>.</li>
</ul>
</section>
<section id="bootstrap" class="level2">
<h2 class="anchored" data-anchor-id="bootstrap">Bootstrap</h2>
<ul>
<li><p>Esta tÃ©cnica cuantifica la <em>incertidumbre</em> asociada a un estimador o mÃ©todo de aprendizaje estadÃ­stico.</p></li>
<li><p><strong>Sirve para reducir variabilidad</strong>.</p></li>
</ul>
</section>
<section id="ejemplo-prÃ¡ctico-clasificaciÃ³n-de-buenos-pagaderos" class="level2">
<h2 class="anchored" data-anchor-id="ejemplo-prÃ¡ctico-clasificaciÃ³n-de-buenos-pagaderos">Ejemplo prÃ¡ctico: ClasificaciÃ³n de Buenos Pagaderos</h2>
<p>Usaremos validaciÃ³n cruzada para <strong>evaluar</strong>, no <em>seleccionar</em> modelos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(Fahrmeir)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'Fahrmeir' was built under R version 4.1.3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(credit)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co"># help(credit)</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(credit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     Y      Cuenta Mes             Ppag         Uso   DM   Sexo         Estc
1 buen          no  18 pre buen pagador     privado 1049  mujer    vive solo
2 buen          no   9 pre buen pagador profesional 2799 hombre no vive solo
3 buen bad running  12 pre buen pagador profesional  841  mujer    vive solo
4 buen          no  12 pre buen pagador profesional 2122 hombre no vive solo
5 buen          no  12 pre buen pagador profesional 2171 hombre no vive solo
6 buen          no  10 pre buen pagador profesional 2241 hombre no vive solo</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="co"># NÃºmero de folds</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>k <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>splitPlan <span class="ot">&lt;-</span> vtreat<span class="sc">::</span><span class="fu">kWayCrossValidation</span>(<span class="at">nRows =</span> <span class="fu">dim</span>(credit)[<span class="dv">1</span>], k)</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>splitPlan</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[[1]]$train
  [1]    2    3    4    5    6    8    9   11   12   13   14   15   16   17   18
 [16]   20   21   22   23   24   26   27   28   29   30   32   33   35   36   37
 [31]   38   39   41   43   44   45   46   47   48   49   50   51   52   53   54
 [46]   55   56   57   58   60   62   63   64   65   66   68   69   70   71   73
 [61]   74   75   76   77   78   79   80   81   82   83   84   85   89   90   91
 [76]   92   93   94   95   97   98   99  100  101  102  103  105  107  108  109
 [91]  110  111  112  115  117  118  119  120  122  123  124  125  126  127  128
[106]  129  130  131  132  133  134  137  138  139  140  141  142  143  144  145
[121]  146  147  148  149  150  151  152  154  155  156  158  159  160  161  162
[136]  163  164  165  168  170  171  172  173  174  175  176  177  178  179  180
[151]  182  183  184  186  187  188  190  192  194  195  198  200  201  202  203
[166]  204  205  206  207  208  209  210  211  212  213  214  215  216  217  220
[181]  221  222  223  224  225  227  228  229  231  232  233  235  236  237  238
[196]  239  240  241  244  245  246  247  248  249  250  252  254  255  256  257
[211]  258  259  260  262  263  264  267  268  269  270  271  272  276  277  278
[226]  279  280  282  283  284  285  286  287  288  290  292  293  295  296  298
[241]  299  300  302  303  304  306  307  308  309  310  311  313  314  317  318
[256]  319  320  321  322  323  324  325  327  328  330  332  333  335  337  338
[271]  339  340  341  342  343  344  345  346  347  349  351  352  353  355  356
[286]  358  359  360  361  362  363  364  365  366  368  369  370  371  372  373
[301]  374  375  376  377  378  379  381  383  386  387  389  391  392  394  395
[316]  396  397  398  399  400  401  403  405  406  407  408  409  410  412  413
[331]  414  416  417  418  419  420  421  423  424  426  427  429  430  431  432
[346]  433  434  435  436  438  439  440  441  442  444  445  446  447  448  449
[361]  451  452  453  455  457  458  459  460  461  462  464  468  469  470  471
[376]  475  476  478  479  480  482  484  485  487  488  489  490  491  494  495
[391]  496  497  498  499  501  502  503  504  505  506  507  508  509  510  513
[406]  514  516  517  518  519  520  521  523  525  527  530  531  532  533  534
[421]  535  536  540  541  542  544  545  546  547  548  549  550  551  552  553
[436]  554  555  556  557  558  560  561  562  563  564  565  566  567  568  569
[451]  570  571  572  573  574  575  576  577  579  581  582  584  585  586  588
[466]  589  590  591  593  595  596  597  600  601  602  603  604  605  606  608
[481]  610  611  612  613  615  617  618  619  620  621  624  625  626  628  629
[496]  630  632  633  634  635  637  638  639  640  641  642  644  645  646  647
[511]  648  649  650  652  653  655  656  657  658  659  660  662  663  664  665
[526]  666  667  668  670  671  672  673  674  675  676  677  678  679  680  682
[541]  684  685  686  687  688  689  690  691  693  694  695  696  697  698  700
[556]  701  702  703  705  709  712  713  714  715  716  717  718  719  720  721
[571]  722  723  724  726  727  728  729  730  731  733  734  735  736  737  738
[586]  740  741  742  743  744  745  746  747  748  749  750  752  753  755  756
[601]  757  758  759  760  761  762  763  765  766  767  769  770  771  772  773
[616]  775  776  777  778  779  780  782  783  785  786  787  789  790  791  792
[631]  793  794  795  796  798  799  801  803  804  805  806  807  808  809  810
[646]  812  813  815  818  819  820  821  822  823  824  825  826  827  828  829
[661]  830  832  834  835  837  838  839  840  841  842  843  844  845  846  847
[676]  848  849  850  852  853  854  855  856  857  858  859  860  861  862  864
[691]  865  866  867  868  869  870  871  873  874  875  876  877  878  879  880
[706]  881  883  884  885  886  887  888  889  890  891  893  894  896  897  898
[721]  899  901  902  903  904  905  907  908  910  911  912  913  914  915  916
[736]  917  918  919  920  921  922  923  925  926  927  928  929  930  931  932
[751]  933  934  935  938  939  940  941  943  944  945  947  948  950  951  952
[766]  953  954  956  957  959  960  962  964  966  967  969  970  971  972  973
[781]  974  975  977  978  979  980  983  984  985  986  987  989  990  991  992
[796]  993  994  998  999 1000

[[1]]$app
  [1] 623 900 326 382 661 511 578 816 627 811 305 946 136 234 297 522 643 218
 [19] 169 895 961  19 116 390 529 181 474 265  40 450 909 598 995 538 833 708
 [37] 281  10 592 707 350 543 189 291 456 774  59 243 768 607 104  88 294 512
 [55] 486 428 599 166 587 251 463 692  86 681 968 380 654 882 988 357  61  87
 [73] 526 334 367 274 191  67  34 711  31 580 981 651 937 199 454   1 348  25
 [91] 135 631 836 616 814 892 936 477 924 289 942 331 354 963 493 872 329 537
[109] 121 500 958 996 609 443 422 437 336 955 704 226 481 275 385  42 788 669
[127] 253 732 472 965   7 725 106 739 754 402 982 153 411 425 114 404 751 483
[145] 976 851 185 113 781 906 817 764 219 949 524 802 683  72 301 261 388 515
[163] 710 415 583 528 316 797 157 614 315 784  96 559 622 196 473 467 393 539
[181] 312 167 863 465 466 800 831 266 492 699 706 384 197 997 242 594 636 273
[199] 230 193


[[2]]
[[2]]$train
  [1]    1    2    3    4    5    6    7    8    9   10   11   12   13   14   15
 [16]   16   17   18   19   21   24   25   26   27   28   30   31   32   34   35
 [31]   37   38   39   40   41   42   43   46   47   48   49   50   52   53   54
 [46]   55   56   57   59   61   62   63   64   66   67   68   69   70   72   73
 [61]   74   75   76   77   78   81   82   83   85   86   87   88   89   90   92
 [76]   93   96  101  102  103  104  105  106  107  110  111  113  114  115  116
 [91]  117  119  120  121  122  123  124  125  127  128  129  130  131  134  135
[106]  136  137  139  141  143  145  146  147  148  149  150  151  152  153  154
[121]  155  156  157  158  159  160  161  162  163  164  166  167  168  169  170
[136]  172  173  174  175  176  178  179  180  181  182  185  187  188  189  190
[151]  191  192  193  194  195  196  197  198  199  200  202  203  205  206  209
[166]  211  212  213  214  215  216  218  219  220  225  226  227  230  232  233
[181]  234  235  236  238  239  242  243  247  248  249  250  251  253  255  256
[196]  257  259  260  261  262  263  265  266  267  269  270  271  272  273  274
[211]  275  276  277  278  279  281  282  283  285  286  287  288  289  290  291
[226]  292  293  294  295  297  298  299  300  301  302  304  305  307  308  309
[241]  310  312  313  314  315  316  317  319  322  323  324  325  326  327  328
[256]  329  331  332  333  334  335  336  338  339  342  343  344  345  346  347
[271]  348  350  351  352  353  354  355  356  357  359  362  363  364  365  367
[286]  368  371  373  374  375  376  377  378  379  380  381  382  383  384  385
[301]  386  388  389  390  391  392  393  395  396  397  398  399  400  401  402
[316]  403  404  405  406  407  408  409  410  411  412  415  417  419  422  423
[331]  424  425  426  428  429  430  431  432  434  435  437  439  440  441  442
[346]  443  444  445  447  448  449  450  451  452  453  454  455  456  459  460
[361]  461  463  464  465  466  467  468  469  470  471  472  473  474  475  476
[376]  477  480  481  482  483  484  486  488  489  490  491  492  493  495  497
[391]  499  500  506  508  509  511  512  514  515  519  520  521  522  524  525
[406]  526  527  528  529  530  531  532  533  534  535  536  537  538  539  540
[421]  542  543  544  545  546  548  550  551  553  554  555  556  557  558  559
[436]  561  562  564  565  567  568  569  570  571  573  574  575  576  577  578
[451]  579  580  581  582  583  584  586  587  588  589  590  591  592  594  596
[466]  598  599  600  601  602  603  604  605  607  609  610  611  612  613  614
[481]  616  618  619  620  621  622  623  624  626  627  628  629  630  631  632
[496]  633  634  635  636  637  638  640  641  642  643  644  645  646  647  648
[511]  650  651  652  654  655  656  657  658  659  660  661  662  663  664  665
[526]  667  669  670  671  672  673  677  678  680  681  683  684  685  687  688
[541]  689  690  692  693  694  695  696  697  698  699  700  701  702  703  704
[556]  705  706  707  708  709  710  711  712  713  714  715  716  717  718  719
[571]  721  722  723  724  725  726  728  729  731  732  733  735  736  737  738
[586]  739  741  742  743  744  745  746  747  748  749  751  752  753  754  755
[601]  756  757  758  759  760  762  763  764  765  766  767  768  769  770  771
[616]  772  773  774  775  776  777  778  781  783  784  786  787  788  789  790
[631]  792  795  796  797  798  799  800  801  802  803  805  807  808  809  810
[646]  811  813  814  815  816  817  818  819  822  824  825  826  827  828  831
[661]  832  833  834  835  836  837  838  840  841  842  843  844  845  846  848
[676]  849  850  851  852  853  854  855  856  858  860  861  862  863  864  865
[691]  866  868  870  872  873  875  876  877  878  879  880  881  882  884  885
[706]  886  887  888  891  892  894  895  896  897  898  899  900  901  902  903
[721]  904  906  907  908  909  910  911  912  915  918  919  922  923  924  926
[736]  927  928  929  930  931  933  934  935  936  937  938  939  940  941  942
[751]  943  944  946  947  948  949  950  951  952  953  954  955  956  958  959
[766]  960  961  962  963  964  965  966  967  968  969  970  971  973  974  975
[781]  976  978  980  981  982  983  984  985  986  987  988  989  990  991  992
[796]  995  996  997  999 1000

[[2]]$app
  [1] 284 905  98  79 184 552 479 510 108 740 258 358 221 794 608 208 998 595
 [19] 727  71 485  60 649 993 597 126 779 228 427 541 806 478 142 457 857 296
 [37]  84 675 830 585 303 823 518 171  58  22 804 916 413 921 501 210 945 421
 [55] 361 254 793 920 207 280 231 100  36 138 682 750  97 782 183 118 252 566
 [73] 224 957  95 420 883 791 679 504 821 547 925 349 859 487 165 372 241 201
 [91] 341 563 917 237 893 321 462  51 222 502 730 867 204  29 829 132 340 229
[109] 223  23 625 523 133 914 366 112  91 593 306 446 311 839 686 264 245  94
[127] 606 177 676 761 668 268 516 890 394 240 549 869 653 785 615 244 418 436
[145] 871 414 517 720 780 217  65 932 874 513  33 617 140 913 494 330 503 572
[163] 433 370 318 337 186 109 387 820 144  45  80 977 972 458 360 812 496 369
[181] 246 320 847 438 639 691 734  99  20  44 674 507 994 416 560 505 889 498
[199] 666 979


[[3]]
[[3]]$train
  [1]    1    3    4    5    6    7    8    9   10   11   12   13   14   15   16
 [16]   17   18   19   20   21   22   23   25   27   28   29   30   31   32   33
 [31]   34   36   37   38   40   41   42   43   44   45   47   50   51   52   53
 [46]   55   56   57   58   59   60   61   62   63   65   66   67   68   69   70
 [61]   71   72   74   75   76   77   78   79   80   84   85   86   87   88   91
 [76]   92   93   94   95   96   97   98   99  100  101  104  105  106  107  108
 [91]  109  112  113  114  115  116  117  118  119  121  122  123  124  125  126
[106]  127  129  132  133  134  135  136  137  138  139  140  141  142  143  144
[121]  146  147  148  149  150  151  152  153  155  156  157  159  160  161  162
[136]  163  164  165  166  167  169  171  172  173  175  176  177  178  180  181
[151]  182  183  184  185  186  187  189  190  191  192  193  194  195  196  197
[166]  199  201  203  204  205  206  207  208  210  211  213  214  216  217  218
[181]  219  221  222  223  224  225  226  227  228  229  230  231  232  233  234
[196]  235  236  237  238  239  240  241  242  243  244  245  246  247  249  250
[211]  251  252  253  254  255  256  257  258  260  261  263  264  265  266  267
[226]  268  269  270  272  273  274  275  276  277  280  281  282  283  284  286
[241]  287  288  289  291  293  294  295  296  297  298  299  301  303  304  305
[256]  306  307  308  309  311  312  313  315  316  317  318  319  320  321  322
[271]  323  324  325  326  329  330  331  332  333  334  335  336  337  338  340
[286]  341  342  343  345  346  348  349  350  353  354  355  356  357  358  360
[301]  361  362  363  365  366  367  369  370  371  372  374  375  376  379  380
[316]  381  382  383  384  385  386  387  388  389  390  391  392  393  394  397
[331]  398  399  400  402  404  406  409  410  411  413  414  415  416  418  419
[346]  420  421  422  423  424  425  427  428  430  431  432  433  436  437  438
[361]  439  442  443  445  446  448  450  453  454  456  457  458  459  460  461
[376]  462  463  464  465  466  467  469  472  473  474  475  476  477  478  479
[391]  480  481  482  483  485  486  487  488  492  493  494  496  498  499  500
[406]  501  502  503  504  505  507  508  509  510  511  512  513  515  516  517
[421]  518  519  520  521  522  523  524  525  526  528  529  530  532  533  534
[436]  535  536  537  538  539  540  541  542  543  545  547  548  549  550  551
[451]  552  553  554  555  557  558  559  560  561  563  566  568  569  570  571
[466]  572  575  576  578  580  581  583  584  585  586  587  588  589  590  591
[481]  592  593  594  595  597  598  599  602  603  604  606  607  608  609  612
[496]  613  614  615  616  617  618  620  621  622  623  624  625  627  630  631
[511]  633  634  636  637  639  641  642  643  646  647  648  649  650  651  652
[526]  653  654  655  657  659  661  662  664  665  666  668  669  670  671  672
[541]  673  674  675  676  677  678  679  681  682  683  685  686  690  691  692
[556]  693  697  699  700  701  702  703  704  705  706  707  708  710  711  713
[571]  714  716  717  718  719  720  721  723  724  725  726  727  728  730  732
[586]  733  734  735  737  738  739  740  741  742  744  745  746  747  749  750
[601]  751  752  754  756  757  758  760  761  763  764  767  768  769  770  771
[616]  773  774  776  777  779  780  781  782  783  784  785  786  787  788  791
[631]  793  794  796  797  798  799  800  801  802  803  804  805  806  809  810
[646]  811  812  813  814  816  817  818  819  820  821  822  823  824  825  826
[661]  827  829  830  831  832  833  835  836  837  839  843  844  846  847  849
[676]  850  851  852  854  855  856  857  858  859  860  861  863  864  865  866
[691]  867  868  869  871  872  873  874  875  876  878  881  882  883  884  885
[706]  887  888  889  890  892  893  894  895  896  897  898  900  901  902  903
[721]  904  905  906  907  909  910  911  912  913  914  916  917  918  919  920
[736]  921  922  924  925  926  927  928  929  930  931  932  933  934  936  937
[751]  938  939  940  942  943  945  946  947  948  949  950  951  952  953  954
[766]  955  957  958  960  961  962  963  965  968  969  971  972  973  976  977
[781]  978  979  980  981  982  983  985  986  988  990  991  992  993  994  995
[796]  996  997  998  999 1000

[[3]]$app
  [1] 848 645 103 974 574 212 605 687 131 840 629 696 736 145 495 959 248 434
 [19] 838 573 667 449 638 102 880 262 828 789 891 497 600 403 444 188 215 328
 [37]  83 964 441 660 841 658 775  39 395 170 417 484 577 405 429 471 601 715
 [55] 886 491 956 378 468 440 564 834 626 344 899 611  49 174 347 271 712 179
 [73] 842 795 755  54 168 935 970 562 531 908 808 845 944 120 198 285 923 879
 [91] 514 565 640 967 632 579 128 689 352 596 546 762 396 377 279 680 792 915
[109] 656 862 407 941   2 292 412 489 259  35 688 452 619 278 447 110 765 989
[127] 373 364 772 853  48 339 684 644 753 815 567 610  82 975  64  24 635 987
[145]  90 426 290 807 709 368 401 698 984 877 748 455 209 202 556 300 694 200
[163] 731 506 302 154 544 327 722 870 527 582 130  81 111 729 451 490 743 966
[181] 435 470 663 790 158 766  73  46 408 759  26 778  89 628 314 359 351 310
[199] 695 220


[[4]]
[[4]]$train
  [1]   1   2   5   6   7   8   9  10  13  14  15  16  19  20  21  22  23  24
 [19]  25  26  29  30  31  32  33  34  35  36  37  38  39  40  41  42  43  44
 [37]  45  46  47  48  49  50  51  53  54  55  58  59  60  61  62  63  64  65
 [55]  66  67  68  70  71  72  73  75  76  77  79  80  81  82  83  84  85  86
 [73]  87  88  89  90  91  92  94  95  96  97  98  99 100 101 102 103 104 106
 [91] 108 109 110 111 112 113 114 116 117 118 120 121 122 126 127 128 130 131
[109] 132 133 134 135 136 138 140 142 143 144 145 146 148 149 151 152 153 154
[127] 155 156 157 158 159 163 165 166 167 168 169 170 171 174 177 178 179 181
[145] 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199
[163] 200 201 202 204 207 208 209 210 212 215 217 218 219 220 221 222 223 224
[181] 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242
[199] 243 244 245 246 247 248 251 252 253 254 257 258 259 260 261 262 264 265
[217] 266 268 270 271 273 274 275 276 278 279 280 281 283 284 285 287 289 290
[235] 291 292 293 294 295 296 297 298 299 300 301 302 303 305 306 308 310 311
[253] 312 313 314 315 316 318 319 320 321 322 323 324 325 326 327 328 329 330
[271] 331 332 333 334 335 336 337 338 339 340 341 344 345 347 348 349 350 351
[289] 352 354 356 357 358 359 360 361 362 363 364 366 367 368 369 370 371 372
[307] 373 377 378 379 380 381 382 384 385 386 387 388 390 391 393 394 395 396
[325] 398 399 400 401 402 403 404 405 407 408 410 411 412 413 414 415 416 417
[343] 418 420 421 422 423 425 426 427 428 429 430 433 434 435 436 437 438 439
[361] 440 441 443 444 445 446 447 449 450 451 452 453 454 455 456 457 458 459
[379] 461 462 463 464 465 466 467 468 470 471 472 473 474 475 476 477 478 479
[397] 481 482 483 484 485 486 487 488 489 490 491 492 493 494 495 496 497 498
[415] 499 500 501 502 503 504 505 506 507 510 511 512 513 514 515 516 517 518
[433] 520 521 522 523 524 526 527 528 529 530 531 532 536 537 538 539 541 543
[451] 544 545 546 547 549 552 554 555 556 557 558 559 560 562 563 564 565 566
[469] 567 569 572 573 574 577 578 579 580 581 582 583 585 586 587 589 590 591
[487] 592 593 594 595 596 597 598 599 600 601 602 605 606 607 608 609 610 611
[505] 612 613 614 615 616 617 619 622 623 624 625 626 627 628 629 630 631 632
[523] 635 636 638 639 640 641 642 643 644 645 646 648 649 651 653 654 656 657
[541] 658 659 660 661 663 664 665 666 667 668 669 674 675 676 679 680 681 682
[559] 683 684 686 687 688 689 690 691 692 694 695 696 698 699 701 704 705 706
[577] 707 708 709 710 711 712 713 715 716 717 718 720 722 723 725 727 729 730
[595] 731 732 733 734 736 737 738 739 740 741 742 743 746 747 748 749 750 751
[613] 752 753 754 755 758 759 760 761 762 764 765 766 768 772 773 774 775 776
[631] 777 778 779 780 781 782 784 785 787 788 789 790 791 792 793 794 795 797
[649] 798 800 802 803 804 805 806 807 808 809 810 811 812 813 814 815 816 817
[667] 818 820 821 822 823 826 827 828 829 830 831 833 834 835 836 837 838 839
[685] 840 841 842 845 847 848 849 850 851 852 853 857 858 859 861 862 863 866
[703] 867 869 870 871 872 874 875 876 877 879 880 881 882 883 886 887 889 890
[721] 891 892 893 895 897 898 899 900 901 902 903 905 906 908 909 913 914 915
[739] 916 917 919 920 921 923 924 925 927 932 935 936 937 941 942 943 944 945
[757] 946 947 949 950 951 953 954 955 956 957 958 959 961 962 963 964 965 966
[775] 967 968 970 972 973 974 975 976 977 979 981 982 984 986 987 988 989 990
[793] 991 992 993 994 995 996 997 998

[[4]]$app
  [1]  918  934  726  884    4  952  634  424  343  928  985  307  561  123  534
 [16]  854  365  757  508  864  460  548  670  214  160  442  868  983  249  697
 [31]  888  375  844  432  540  147  250  431  938   12  678  107  978  216  980
 [46]  588  904  203  542  397  205  671  309  878  480  896  677  735  105  389
 [61]  939  141  907  211  948  929  469  885   74  551  652  272  164  576  269
 [76]  383  693  771  277  673  796  724   11  745  930  346  637  535  922  419
 [91]  161  763  206  286  604 1000  603  672  376  150  700  374   57  662  570
[106]  263  618  655  911  769  176  933  756  719  912  124  999   17  931  304
[121]  873  940  267  509  894  568  550  584  728    3  448   28  392   27  525
[136]  926  702  647  353  119  620  832   52  824  721  575  825  355  971  162
[151]  783  786  125  819  137  553  172  175  846  571  115  770  843  801  409
[166]  255  519   56  856  342  714  406   93  213  180   78  256  799  129  865
[181]  633  139  855  621  703  744  317  860  650  533   18   69  969  282  173
[196]  767  960  288  910  685


[[5]]
[[5]]$train
  [1]    1    2    3    4    7   10   11   12   17   18   19   20   22   23   24
 [16]   25   26   27   28   29   31   33   34   35   36   39   40   42   44   45
 [31]   46   48   49   51   52   54   56   57   58   59   60   61   64   65   67
 [46]   69   71   72   73   74   78   79   80   81   82   83   84   86   87   88
 [61]   89   90   91   93   94   95   96   97   98   99  100  102  103  104  105
 [76]  106  107  108  109  110  111  112  113  114  115  116  118  119  120  121
 [91]  123  124  125  126  128  129  130  131  132  133  135  136  137  138  139
[106]  140  141  142  144  145  147  150  153  154  157  158  160  161  162  164
[121]  165  166  167  168  169  170  171  172  173  174  175  176  177  179  180
[136]  181  183  184  185  186  188  189  191  193  196  197  198  199  200  201
[151]  202  203  204  205  206  207  208  209  210  211  212  213  214  215  216
[166]  217  218  219  220  221  222  223  224  226  228  229  230  231  234  237
[181]  240  241  242  243  244  245  246  248  249  250  251  252  253  254  255
[196]  256  258  259  261  262  263  264  265  266  267  268  269  271  272  273
[211]  274  275  277  278  279  280  281  282  284  285  286  288  289  290  291
[226]  292  294  296  297  300  301  302  303  304  305  306  307  309  310  311
[241]  312  314  315  316  317  318  320  321  326  327  328  329  330  331  334
[256]  336  337  339  340  341  342  343  344  346  347  348  349  350  351  352
[271]  353  354  355  357  358  359  360  361  364  365  366  367  368  369  370
[286]  372  373  374  375  376  377  378  380  382  383  384  385  387  388  389
[301]  390  392  393  394  395  396  397  401  402  403  404  405  406  407  408
[316]  409  411  412  413  414  415  416  417  418  419  420  421  422  424  425
[331]  426  427  428  429  431  432  433  434  435  436  437  438  440  441  442
[346]  443  444  446  447  448  449  450  451  452  454  455  456  457  458  460
[361]  462  463  465  466  467  468  469  470  471  472  473  474  477  478  479
[376]  480  481  483  484  485  486  487  489  490  491  492  493  494  495  496
[391]  497  498  500  501  502  503  504  505  506  507  508  509  510  511  512
[406]  513  514  515  516  517  518  519  522  523  524  525  526  527  528  529
[421]  531  533  534  535  537  538  539  540  541  542  543  544  546  547  548
[436]  549  550  551  552  553  556  559  560  561  562  563  564  565  566  567
[451]  568  570  571  572  573  574  575  576  577  578  579  580  582  583  584
[466]  585  587  588  592  593  594  595  596  597  598  599  600  601  603  604
[481]  605  606  607  608  609  610  611  614  615  616  617  618  619  620  621
[496]  622  623  625  626  627  628  629  631  632  633  634  635  636  637  638
[511]  639  640  643  644  645  647  649  650  651  652  653  654  655  656  658
[526]  660  661  662  663  666  667  668  669  670  671  672  673  674  675  676
[541]  677  678  679  680  681  682  683  684  685  686  687  688  689  691  692
[556]  693  694  695  696  697  698  699  700  702  703  704  706  707  708  709
[571]  710  711  712  714  715  719  720  721  722  724  725  726  727  728  729
[586]  730  731  732  734  735  736  739  740  743  744  745  748  750  751  753
[601]  754  755  756  757  759  761  762  763  764  765  766  767  768  769  770
[616]  771  772  774  775  778  779  780  781  782  783  784  785  786  788  789
[631]  790  791  792  793  794  795  796  797  799  800  801  802  804  806  807
[646]  808  811  812  814  815  816  817  819  820  821  823  824  825  828  829
[661]  830  831  832  833  834  836  838  839  840  841  842  843  844  845  846
[676]  847  848  851  853  854  855  856  857  859  860  862  863  864  865  867
[691]  868  869  870  871  872  873  874  877  878  879  880  882  883  884  885
[706]  886  888  889  890  891  892  893  894  895  896  899  900  904  905  906
[721]  907  908  909  910  911  912  913  914  915  916  917  918  920  921  922
[736]  923  924  925  926  928  929  930  931  932  933  934  935  936  937  938
[751]  939  940  941  942  944  945  946  948  949  952  955  956  957  958  959
[766]  960  961  963  964  965  966  967  968  969  970  971  972  974  975  976
[781]  977  978  979  980  981  982  983  984  985  987  988  989  993  994  995
[796]  996  997  998  999 1000

[[5]]$app
  [1] 101 400 602 270 991 195 901 379  41 298 182 902 313 776 803 569 665 760
 [19] 276 986 954 887 319 826  77 642 163 646 953 992 363 335 659 488 613 701
 [37] 876  30 345 293 338 752  43 747 737  63  70 227 476 716 475  66 897 430
 [55]  15 178 194 155 482 499 827 962 362 461 758 371 260 554 777 738 459  76
 [73]  13 545  53 657 630 530 947 648 127 308 149 717 235 439 152 399 557 881
 [91]  75 733 192 143 852 586 612 295  85 159 299 391 835  55 190 866 238 809
[109] 187 536 818 520  38 973  21 356 453 903  32 225 927 837 749 591 423 532
[127] 705 773  14 122 664 943  37 875 718 742 590 555 283   6 898 287 521 741
[145] 624 861 805 333 813  62 323  16 117 445 810 850   5 849   8 950 233 787
[163] 410 581 464 558  68 151 325 257 239 332 148 322 951  47 324  92  50 146
[181] 746 858 398 919 798 822 381 990 589 386 690 713 134 236   9 156 232 723
[199] 641 247


attr(,"splitmethod")
[1] "kwaycross"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>testAUCCV5 <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>testLogLossCV5 <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>splitPlan[[<span class="dv">1</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$train
  [1]    2    3    4    5    6    8    9   11   12   13   14   15   16   17   18
 [16]   20   21   22   23   24   26   27   28   29   30   32   33   35   36   37
 [31]   38   39   41   43   44   45   46   47   48   49   50   51   52   53   54
 [46]   55   56   57   58   60   62   63   64   65   66   68   69   70   71   73
 [61]   74   75   76   77   78   79   80   81   82   83   84   85   89   90   91
 [76]   92   93   94   95   97   98   99  100  101  102  103  105  107  108  109
 [91]  110  111  112  115  117  118  119  120  122  123  124  125  126  127  128
[106]  129  130  131  132  133  134  137  138  139  140  141  142  143  144  145
[121]  146  147  148  149  150  151  152  154  155  156  158  159  160  161  162
[136]  163  164  165  168  170  171  172  173  174  175  176  177  178  179  180
[151]  182  183  184  186  187  188  190  192  194  195  198  200  201  202  203
[166]  204  205  206  207  208  209  210  211  212  213  214  215  216  217  220
[181]  221  222  223  224  225  227  228  229  231  232  233  235  236  237  238
[196]  239  240  241  244  245  246  247  248  249  250  252  254  255  256  257
[211]  258  259  260  262  263  264  267  268  269  270  271  272  276  277  278
[226]  279  280  282  283  284  285  286  287  288  290  292  293  295  296  298
[241]  299  300  302  303  304  306  307  308  309  310  311  313  314  317  318
[256]  319  320  321  322  323  324  325  327  328  330  332  333  335  337  338
[271]  339  340  341  342  343  344  345  346  347  349  351  352  353  355  356
[286]  358  359  360  361  362  363  364  365  366  368  369  370  371  372  373
[301]  374  375  376  377  378  379  381  383  386  387  389  391  392  394  395
[316]  396  397  398  399  400  401  403  405  406  407  408  409  410  412  413
[331]  414  416  417  418  419  420  421  423  424  426  427  429  430  431  432
[346]  433  434  435  436  438  439  440  441  442  444  445  446  447  448  449
[361]  451  452  453  455  457  458  459  460  461  462  464  468  469  470  471
[376]  475  476  478  479  480  482  484  485  487  488  489  490  491  494  495
[391]  496  497  498  499  501  502  503  504  505  506  507  508  509  510  513
[406]  514  516  517  518  519  520  521  523  525  527  530  531  532  533  534
[421]  535  536  540  541  542  544  545  546  547  548  549  550  551  552  553
[436]  554  555  556  557  558  560  561  562  563  564  565  566  567  568  569
[451]  570  571  572  573  574  575  576  577  579  581  582  584  585  586  588
[466]  589  590  591  593  595  596  597  600  601  602  603  604  605  606  608
[481]  610  611  612  613  615  617  618  619  620  621  624  625  626  628  629
[496]  630  632  633  634  635  637  638  639  640  641  642  644  645  646  647
[511]  648  649  650  652  653  655  656  657  658  659  660  662  663  664  665
[526]  666  667  668  670  671  672  673  674  675  676  677  678  679  680  682
[541]  684  685  686  687  688  689  690  691  693  694  695  696  697  698  700
[556]  701  702  703  705  709  712  713  714  715  716  717  718  719  720  721
[571]  722  723  724  726  727  728  729  730  731  733  734  735  736  737  738
[586]  740  741  742  743  744  745  746  747  748  749  750  752  753  755  756
[601]  757  758  759  760  761  762  763  765  766  767  769  770  771  772  773
[616]  775  776  777  778  779  780  782  783  785  786  787  789  790  791  792
[631]  793  794  795  796  798  799  801  803  804  805  806  807  808  809  810
[646]  812  813  815  818  819  820  821  822  823  824  825  826  827  828  829
[661]  830  832  834  835  837  838  839  840  841  842  843  844  845  846  847
[676]  848  849  850  852  853  854  855  856  857  858  859  860  861  862  864
[691]  865  866  867  868  869  870  871  873  874  875  876  877  878  879  880
[706]  881  883  884  885  886  887  888  889  890  891  893  894  896  897  898
[721]  899  901  902  903  904  905  907  908  910  911  912  913  914  915  916
[736]  917  918  919  920  921  922  923  925  926  927  928  929  930  931  932
[751]  933  934  935  938  939  940  941  943  944  945  947  948  950  951  952
[766]  953  954  956  957  959  960  962  964  966  967  969  970  971  972  973
[781]  974  975  977  978  979  980  983  984  985  986  987  989  990  991  992
[796]  993  994  998  999 1000

$app
  [1] 623 900 326 382 661 511 578 816 627 811 305 946 136 234 297 522 643 218
 [19] 169 895 961  19 116 390 529 181 474 265  40 450 909 598 995 538 833 708
 [37] 281  10 592 707 350 543 189 291 456 774  59 243 768 607 104  88 294 512
 [55] 486 428 599 166 587 251 463 692  86 681 968 380 654 882 988 357  61  87
 [73] 526 334 367 274 191  67  34 711  31 580 981 651 937 199 454   1 348  25
 [91] 135 631 836 616 814 892 936 477 924 289 942 331 354 963 493 872 329 537
[109] 121 500 958 996 609 443 422 437 336 955 704 226 481 275 385  42 788 669
[127] 253 732 472 965   7 725 106 739 754 402 982 153 411 425 114 404 751 483
[145] 976 851 185 113 781 906 817 764 219 949 524 802 683  72 301 261 388 515
[163] 710 415 583 528 316 797 157 614 315 784  96 559 622 196 473 467 393 539
[181] 312 167 863 465 466 800 831 266 492 699 706 384 197 997 242 594 636 273
[199] 230 193</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>k) {</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  split <span class="ot">&lt;-</span> splitPlan[[i]]</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  modelo_logistic <span class="ot">&lt;-</span> <span class="fu">glm</span>(Y <span class="sc">~</span> ., </span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">family =</span> binomial, <span class="at">data =</span> credit[split<span class="sc">$</span>train,]</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>  yprob <span class="ot">&lt;-</span> <span class="fu">predict</span>(modelo_logistic, </span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">newdata =</span> credit[split<span class="sc">$</span>app,],</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">type =</span> <span class="st">"response"</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>  testLogLossCV5[i] <span class="ot">&lt;-</span> MLmetrics<span class="sc">::</span><span class="fu">LogLoss</span>(</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>    yprob, <span class="fu">as.numeric</span>(credit[split<span class="sc">$</span>app,]<span class="sc">$</span>Y) <span class="sc">-</span> <span class="dv">1</span></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>  testAUCCV5[i] <span class="ot">&lt;-</span> MLmetrics<span class="sc">::</span><span class="fu">AUC</span>(</span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>    yprob, <span class="fu">as.numeric</span>(credit[split<span class="sc">$</span>app,]<span class="sc">$</span>Y) <span class="sc">-</span> <span class="dv">1</span></span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># LogLoss</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>testLogLossCV5</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.5435299 0.4626547 0.4954209 0.5635933 0.5354452</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(testLogLossCV5)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.5201288</code></pre>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># AUC</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>testAUCCV5</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.7083968 0.8068239 0.8152420 0.7507799 0.7421078</code></pre>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(testAUCCV5)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.7646701</code></pre>
</div>
</div>
</section>
<section id="ejemplo-prÃ¡ctico-calibraciÃ³n-de-hiperparÃ¡metros-de-knn" class="level2">
<h2 class="anchored" data-anchor-id="ejemplo-prÃ¡ctico-calibraciÃ³n-de-hiperparÃ¡metros-de-knn">Ejemplo prÃ¡ctico: CalibraciÃ³n de hiperparÃ¡metros de KNN</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>diabetes <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"../datos/DiabetesTrain.csv"</span>, <span class="at">stringsAsFactors =</span> <span class="cn">TRUE</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(diabetes)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  glucose insulin sspg  class
1      97     289  117 normal
2     105     319  143 normal
3      90     356  199 normal
4      90     323  240 normal
5      86     381  157 normal
6     100     350  221 normal</code></pre>
</div>
</div>
<section id="validaciÃ³n-cruzada-loocv" class="level3">
<h3 class="anchored" data-anchor-id="validaciÃ³n-cruzada-loocv">ValidaciÃ³n Cruzada (LOOCV)</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">007</span>)</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  class<span class="sc">::</span><span class="fu">knn.cv</span>(</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">train =</span> diabetes[,<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>], <span class="at">cl =</span> diabetes[,<span class="dv">4</span>], <span class="at">k =</span> <span class="dv">1</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">==</span> diabetes[,<span class="dv">4</span>]</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.8869565</code></pre>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  class<span class="sc">::</span><span class="fu">knn.cv</span>(</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">train =</span> diabetes[,<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>], <span class="at">cl =</span> diabetes[,<span class="dv">4</span>], <span class="at">k =</span> <span class="dv">3</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">==</span> diabetes[,<span class="dv">4</span>]</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.9043478</code></pre>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  class<span class="sc">::</span><span class="fu">knn.cv</span>(</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">train =</span> diabetes[,<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>], <span class="at">cl =</span> diabetes[,<span class="dv">4</span>], <span class="at">k =</span> <span class="dv">5</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">==</span> diabetes[,<span class="dv">4</span>]</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.8956522</code></pre>
</div>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>  class<span class="sc">::</span><span class="fu">knn.cv</span>(</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">train =</span> diabetes[,<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>], <span class="at">cl =</span> diabetes[,<span class="dv">4</span>], <span class="at">k =</span> <span class="dv">7</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">==</span> diabetes[,<span class="dv">4</span>]</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.8956522</code></pre>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>  class<span class="sc">::</span><span class="fu">knn.cv</span>(</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">train =</span> diabetes[,<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>], <span class="at">cl =</span> diabetes[,<span class="dv">4</span>], <span class="at">k =</span> <span class="dv">9</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">==</span> diabetes[,<span class="dv">4</span>]</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.8956522</code></pre>
</div>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  class<span class="sc">::</span><span class="fu">knn.cv</span>(</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">train =</span> diabetes[,<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>], <span class="at">cl =</span> diabetes[,<span class="dv">4</span>], <span class="at">k =</span> <span class="dv">11</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">==</span> diabetes[,<span class="dv">4</span>]</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.8869565</code></pre>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>  class<span class="sc">::</span><span class="fu">knn.cv</span>(</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">train =</span> diabetes[,<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>], <span class="at">cl =</span> diabetes[,<span class="dv">4</span>], <span class="at">k =</span> <span class="dv">13</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">==</span> diabetes[,<span class="dv">4</span>]</span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.8956522</code></pre>
</div>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>  class<span class="sc">::</span><span class="fu">knn.cv</span>(</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">train =</span> diabetes[,<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>], <span class="at">cl =</span> diabetes[,<span class="dv">4</span>], <span class="at">k =</span> <span class="dv">15</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">==</span> diabetes[,<span class="dv">4</span>]</span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.8782609</code></pre>
</div>
</div>
</section>
</section>
<section id="examen-parcial" class="level2">
<h2 class="anchored" data-anchor-id="examen-parcial">Examen Parcial</h2>
<p>Hasta este punto viene el examen.</p>
<p>La primera parte es de pregunta-respuesta mÃºltiple. La segunda parte es con <strong>R</strong> (vale 10 puntos o menos).</p>
<p>El examen suele durar 3 o menos horas.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "î§";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../apuntes/clase-07.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Apuntes de clase</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../apuntes/clase-09.html" class="pagination-link">
        <span class="nav-page-text">Apuntes de clase</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>